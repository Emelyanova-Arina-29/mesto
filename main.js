(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e,n,r,o,i){var u=i.deleteCardClick,a=i.handleLike,c=i.removeLike;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._cardId=e._id,this._likes=e.likes,this._ownerId=e.owner._id,this._templateId=n,this._userId=r,this._handleCardClick=o,this._deleteCardClick=u,this._handleLike=a,this._removeLike=c}var n,r;return n=t,r=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateId).content.querySelector(".card").cloneNode(!0)}},{key:"addLike",value:function(){this._likeButton.classList.add("card__like_active")}},{key:"removeLike",value:function(){this._likeButton.classList.remove("card__like_active")}},{key:"likeCard",value:function(t){this._likeButton.classList.toggle("card__like_active"),this._likes=t.likes,this._likeCounter.textContent=this._likes.length}},{key:"_likesUser",value:function(){var t=this;this._likes.some((function(e){return t._userId===e._id}))&&this.addLike()}},{key:"deleteCard",value:function(){this._element.remove(),this._element=null}},{key:"_removeDeleteButton",value:function(){this._userId!==this._ownerId&&this._deleteButton.remove()}},{key:"_setEventListeners",value:function(){var t=this;this._cardImage.addEventListener("click",(function(){t._handleCardClick(t._name,t._link)})),this._likeButton.addEventListener("click",(function(){t._likeButton.classList.contains("card__like_active")?t._removeLike(t._cardId):t._handleLike(t._cardId)})),this._deleteButton.addEventListener("click",(function(){t._deleteCardClick(t._cardId)}))}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".card__like"),this._titleCard=this._element.querySelector(".card__title"),this._cardImage=this._element.querySelector(".card__image"),this._deleteButton=this._element.querySelector(".card__delete"),this._likeCounter=this._element.querySelector(".card__number-like"),this._likesUser(),this._cardImage.alt=this._name,this._titleCard.textContent=this._name,this._cardImage.src=this._link,this._removeDeleteButton(),this._likeCounter.textContent=this._likes.length,this._setEventListeners(),this._element}},{key:"getNameImage",value:function(){return this._name}},{key:"getLinkImage",value:function(){return this._link}}],r&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(),r={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"},o=document.querySelector(".page"),i=o.querySelector(".profile__add"),u=o.querySelector(".profile__edit"),a=o.querySelector(".profile__edit-avatar"),c=document.forms.popupEdit,l=document.forms.popupAdd,s=document.forms.popupAvatar,f=o.querySelector(".popup_type_view"),p=f.querySelector(".popup__image"),y=f.querySelector(".popup__caption"),d=c.querySelector(".popup__input_type_name"),h=c.querySelector(".popup__input_type_description");function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===v(o)?o:String(o)),r)}var o}s.querySelector(".popup__input_type_avatar");var m=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=n,this._inputs=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector)}var e,n;return e=t,(n=[{key:"_hideInputError",value:function(t){var e=this._form.querySelector(".".concat(t.id,"-error"));e.classList.remove(this._errorClass),e.textContent="",t.classList.remove(this._inputErrorClass)}},{key:"_showInputError",value:function(t){var e=this._form.querySelector(".".concat(t.id,"-error"));e.classList.add(this._errorClass),e.textContent=t.validationMessage,t.classList.add(this._inputErrorClass)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_hasInvalidInput",value:function(){return this._inputs.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.disableButton():(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"disableButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"_setEventListeners",value:function(){var t=this;this._toggleButtonState(),this._inputs.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"removeValidation",value:function(){var t=this;this._toggleButtonState(),this._inputs.forEach((function(e){t._hideInputError(e)}))}}])&&_(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===b(o)?o:String(o)),r)}var o}var g=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"addItem",value:function(t){this._container.append(t)}},{key:"addItemStart",value:function(t){this._container.prepend(t)}},{key:"renderItems",value:function(t){var e=this;t.forEach((function(t){e._renderer(t)}))}}])&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===k(o)?o:String(o)),r)}var o}var P=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.closePopup()}},{key:"openPopup",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"closePopup",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"renderLoading",value:function(t){this._buttonSubmit.textContent=t?"Сохранение...":this._buttonSubmitText}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){e.target.classList.contains("popup_opened")&&t.closePopup(),e.target.classList.contains("popup__close")&&t.closePopup()}))}}])&&w(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==E(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===E(o)?o:String(o)),r)}var o}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=L(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},j.apply(this,arguments)}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}function L(t){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},L(t)}var I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=L(r);if(o){var n=L(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,t))._popupImage=e,r._popupNameImage=n,r}return e=u,(n=[{key:"openPopup",value:function(t,e){this._popupImage.alt=t,this._popupNameImage.textContent=t,this._popupImage.src=e,j(L(u.prototype),"openPopup",this).call(this)}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(P);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==T(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===T(o)?o:String(o)),r)}var o}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},q.apply(this,arguments)}function B(t,e){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},B(t,e)}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=x(r);if(o){var n=x(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._formSubmit=e,n._form=n._popup.querySelector(".popup__form"),n._inputs=n._form.querySelectorAll(".popup__input"),n._buttonSubmit=n._form.querySelector(".popup__button"),n._buttonSubmitText=n._buttonSubmit.textContent,n}return e=u,(n=[{key:"_getInputValues",value:function(){var t={};return this._inputs.forEach((function(e){t[e.name]=e.value})),t}},{key:"setInputValues",value:function(t){this._inputs.forEach((function(e){e.value=t[e.name]}))}},{key:"closePopup",value:function(){q(x(u.prototype),"closePopup",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var t=this;q(x(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._formSubmit(t._getInputValues())}))}}])&&R(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(P);function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==D(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===D(o)?o:String(o)),r)}var o}var N=function(){function t(e){var n=e.selectorName,r=e.selectorDescription,o=e.selectorAvatar;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._profileName=document.querySelector(n),this._profileDescription=document.querySelector(r),this._profileAvatar=document.querySelector(o)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,about:this._profileDescription.textContent,avatar:this._profileAvatar.src}}},{key:"setUserInfo",value:function(t){this._profileName.textContent=t.name,this._profileDescription.textContent=t.about,this._profileAvatar.src=t.avatar}}])&&U(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==V(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===V(o)?o:String(o)),r)}var o}var J=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e.url,this._headers=e.headers}var e,n;return e=t,(n=[{key:"_handleResponse",value:function(t){return t.ok?t.json():Promise.reject("Произошла ошибка: ".concat(t.status))}},{key:"getCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then(this._handleResponse)}},{key:"createCard",value:function(t,e){return fetch("".concat(this._url,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({name:t,link:e})}).then(this._handleResponse)}},{key:"deleteCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t),{headers:this._headers,method:"DELETE"}).then(this._handleResponse)}},{key:"addLikeCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{headers:this._headers,method:"PUT"}).then(this._handleResponse)}},{key:"deleteLikeCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{headers:this._headers,method:"DELETE"}).then(this._handleResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then(this._handleResponse)}},{key:"editUserInfo",value:function(t,e){return fetch("".concat(this._url,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:t,about:e})}).then(this._handleResponse)}},{key:"editUserAvatar",value:function(t){return fetch("".concat(this._url,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:t})}).then(this._handleResponse)}}])&&H(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==M(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===M(o)?o:String(o)),r)}var o}function $(){return $="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=G(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},$.apply(this,arguments)}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}function G(t){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},G(t)}var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=G(r);if(o){var n=G(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._form=e._popup.querySelector(".popup__form"),e._button=e._form.querySelectorAll(".popup__button"),e._buttonSubmit=e._form.querySelector(".popup__button"),e._buttonSubmitText=e._buttonSubmit.textContent,e}return e=u,(n=[{key:"renderLoading",value:function(t){this._buttonSubmit.textContent=t?"Удаление...":this._buttonSubmitText}},{key:"setSubmitHandler",value:function(t){this._deleteCardClick=t}},{key:"setEventListeners",value:function(){var t=this;$(G(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._deleteCardClick()}))}}])&&z(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(P);function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var W=new m(r,c);W.enableValidation();var X=new m(r,l);X.enableValidation();var Y=new m(r,s);Y.enableValidation();var Z,tt=new J({url:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{authorization:"f1580dcf-100f-4c1e-a333-5ef7b032595f","Content-Type":"application/json"}}),et=new N({selectorName:".profile__name",selectorDescription:".profile__description",selectorAvatar:".profile__avatar"}),nt=new g({renderer:function(t){var e=rt(t);nt.addItem(e)}},".cards");function rt(t){var e=new n(t,"#cards",Z,it,{deleteCardClick:function(t){lt.openPopup(),lt.setSubmitHandler((function(){lt.renderLoading(!0),tt.deleteCard(t).then((function(){e.deleteCard(),lt.closePopup()})).catch((function(t){console.log("Произошла ошибка: ".concat(t))})).finally((function(){lt.renderLoading(!1)}))}))},handleLike:function(t){tt.addLikeCard(t).then((function(t){e.likeCard(t)})).catch((function(t){console.log("Произошла ошибка: ".concat(t))}))},removeLike:function(t){tt.deleteLikeCard(t).then((function(t){e.likeCard(t)})).catch((function(t){console.log("Произошла ошибка: ".concat(t))}))}});return e.generateCard()}Promise.all([tt.getUserInfo(),tt.getCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];et.setUserInfo(o),Z=o._id,nt.renderItems(i)})).catch((function(t){console.log("Произошла ошибка: ".concat(t))}));var ot=new I(".popup_type_view",p,y);function it(t,e){ot.openPopup(t,e)}ot.setEventListeners();var ut=new A(".popup_type_edit",(function(t){ut.renderLoading(!0),tt.editUserInfo(t.inputNameProfile,t.inputDescriptionProfile).then((function(t){et.setUserInfo(t),ut.closePopup()})).catch((function(t){console.log("Произошла ошибка: ".concat(t))})).finally((function(){ut.renderLoading(!1)}))}));ut.setEventListeners(),u.addEventListener("click",(function(){W.removeValidation();var t=et.getUserInfo(),e=t.name,n=t.about;d.value=e,h.value=n,ut.openPopup()}));var at=new A(".popup_type_create",(function(t){at.renderLoading(!0),tt.createCard(t.name,t.link).then((function(t){nt.addItemStart(rt(t)),at.closePopup()})).catch((function(t){console.log("Произошла ошибка: ".concat(t))})).finally((function(){at.renderLoading(!1)}))}));at.setEventListeners(),i.addEventListener("click",(function(){X.removeValidation(),at.openPopup()}));var ct=new A(".popup_type_avatar",(function(t){ct.renderLoading(!0),tt.editUserAvatar(t.inputAvatar).then((function(t){et.setUserInfo(t),ct.closePopup()})).catch((function(t){console.log("Произошла ошибка: ".concat(t))})).finally((function(){ct.renderLoading(!1)}))}));ct.setEventListeners(),a.addEventListener("click",(function(){Y.removeValidation(),ct.openPopup()}));var lt=new K(".popup_type_delete");lt.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TCxvQkFFaEJwSixFQUEwQmpCLGlCQUFpQixTQUFTLFdBQ2xEc0ksRUFBdUJrQyxtQkFDdkJFLEdBQWdCMUIsV0FDbEIsSUFJQSxJQUFNdEgsR0FBYyxJQUFJa0UsRUFBYyxzQkFDdEMsU0FBQzVJLEdBQ0MwRSxHQUFZd0gsZUFBYyxHQUMxQlYsR0FBSW9DLGVBQWU1TixFQUFLNk4sYUFDckJwRCxNQUFLLFNBQUN6SyxHQUNMMEMsR0FBS3dLLFlBQVlsTixHQUNqQjBFLEdBQVlrRCxZQUNkLElBQ0N1RSxPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUkscUJBQURyRyxPQUFzQm1HLEdBQ25DLElBQ0NHLFNBQVEsV0FDUDdILEdBQVl3SCxlQUFjLEVBQzVCLEdBQ0osSUFDQXhILEdBQVkySSxvQkFFWmxKLEVBQXNCbkIsaUJBQWlCLFNBQVMsV0FDOUN1SSxFQUEwQmlDLG1CQUMxQjlJLEdBQVlzSCxXQUNkLElBSUEsSUFBTUQsR0FBa0IsSUFBSWQsRUFBc0Isc0JBRWxEYyxHQUFnQnNCLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy91dGlscy9lbGVtZW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCB0ZW1wbGF0ZUlkLCB1c2VySWQsIGhhbmRsZUNhcmRDbGljaywgeyBkZWxldGVDYXJkQ2xpY2ssIGhhbmRsZUxpa2UsIHJlbW92ZUxpa2UgfSkge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9jYXJkSWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xuICAgIHRoaXMuX3RlbXBsYXRlSWQgPSB0ZW1wbGF0ZUlkO1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5fZGVsZXRlQ2FyZENsaWNrID0gZGVsZXRlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUxpa2UgPSBoYW5kbGVMaWtlO1xuICAgIHRoaXMuX3JlbW92ZUxpa2UgPSByZW1vdmVMaWtlO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlSWQpLlxuICAgIGNvbnRlbnQucXVlcnlTZWxlY3RvcignLmNhcmQnKS5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZDtcbiAgfVxuXG4gIC8qINCf0L7RgdGC0LDQstC40YLRjCDQu9Cw0LnQuiAqL1xuXG4gIGFkZExpa2UoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXJkX19saWtlX2FjdGl2ZScpO1xuICB9O1xuXG4gIC8qINCj0LHRgNCw0YLRjCDQu9Cw0LnQuiAqL1xuXG4gIHJlbW92ZUxpa2UoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkX19saWtlX2FjdGl2ZScpO1xuICB9O1xuXG4gIC8qINCb0LDQudC60L3Rg9GC0Ywg0LrQsNGA0YLQvtGH0LrRgyAqL1xuXG4gIGxpa2VDYXJkKGRhdGEpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2xpa2VfYWN0aXZlJyk7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuICAgIHRoaXMuX2xpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICB9O1xuXG4gIC8qINCb0LDQudC60L3Rg9C7INC70Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINC60LDRgNGC0L7Rh9C60YM/ICovXG5cbiAgX2xpa2VzVXNlcigpIHtcbiAgICBpZiAodGhpcy5fbGlrZXMuc29tZSgodXNlcikgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX3VzZXJJZCA9PT0gdXNlci5faWQ7XG4gICAgfSkpIHtcbiAgICAgIHRoaXMuYWRkTGlrZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qINCj0LTQsNC70LjRgtGMINC60LDRgNGC0L7Rh9C60YMgKi9cblxuICBkZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gIH1cblxuICAvKiDQo9Cx0LjRgNCw0LXQvCDQutC90L7Qv9C60YMg0YPQtNCw0LvQtdC90LjRjyDRgyDRh9GD0LbQuNGFINC60LDRgNGC0L7Rh9C10LogKi9cblxuICBfcmVtb3ZlRGVsZXRlQnV0dG9uKCkge1xuICAgIGlmICh0aGlzLl91c2VySWQgIT09IHRoaXMuX293bmVySWQpIHtcbiAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICAvKiDQndCw0LLQtdGI0LjQstCw0LXQvCDQvtCx0YDQsNCx0L7RgtGH0LjQutC4ICovXG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgICB9KTtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdjYXJkX19saWtlX2FjdGl2ZScpKSB7XG4gICAgICAgIHRoaXMuX3JlbW92ZUxpa2UodGhpcy5fY2FyZElkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2UodGhpcy5fY2FyZElkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9kZWxldGVDYXJkQ2xpY2sodGhpcy5fY2FyZElkKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZScpO1xuICAgIHRoaXMuX3RpdGxlQ2FyZCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3RpdGxlJyk7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19kZWxldGUnKTtcbiAgICB0aGlzLl9saWtlQ291bnRlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX251bWJlci1saWtlJyk7XG5cbiAgICB0aGlzLl9saWtlc1VzZXIoKTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX3RpdGxlQ2FyZC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fcmVtb3ZlRGVsZXRlQnV0dG9uKCk7XG4gICAgdGhpcy5fbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgZ2V0TmFtZUltYWdlKCkge1xuICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICB9XG5cbiAgZ2V0TGlua0ltYWdlKCkge1xuICAgIHJldHVybiB0aGlzLl9saW5rO1xuICB9XG59XG4iLCIvKiDQnNCw0YHRgdC40LIg0LrQsNGA0YLQvtGH0LXQuiAqL1xuXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogJ9CQ0YDRhdGL0LcnLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JjQstCw0L3QvtCy0L4nLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JrQsNC80YfQsNGC0LrQsCcsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JHQsNC50LrQsNC7JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnXG4gIH1cbl07XG5cbi8qINCe0LHRitC10LrRgiwg0YHQvtGB0YLQvtGP0YnQuNC5INC40Lcg0YHQstC+0LnRgdGC0LIsINC30L3QsNGH0LXQvdC40Y/QvNC4INC60L7RgtC+0YDRi9GFINGP0LLQu9GP0Y7RgtGB0Y8g0LrQu9Cw0YHRgdGLLCDQvdC10L7QsdGF0L7QtNC40LzRi9C1INC00LvRjyDRg9C90LjQstC10YDRgdCw0LvRjNC90L7Qs9C+INC90LDQv9C40YHQsNC90LjRjyDQutC+0LTQsCDQstCw0LvQuNC00LDRhtC40LggKi9cblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX2J1dHRvbicsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uX2Rpc2FibGVkJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxuICBlcnJvckNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yX3Zpc2libGUnXG59O1xuXG5leHBvcnQgY29uc3QgcGVyc29uYWxEYXRhID0ge1xuICB1cmw6J2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjAnLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogJ2YxNTgwZGNmLTEwMGYtNGMxZS1hMzMzLTVlZjdiMDMyNTk1ZicsXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICB9XG59XG4iLCJjb25zdCBwYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhZ2UnKTtcblxuY29uc3QgYnV0dG9uT3BlblBvcHVwQ3JlYXRlQ2FyZCA9IHBhZ2UucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZCcpO1xuY29uc3QgYnV0dG9uT3BlblBvcHVwRWRpdFByb2ZpbGUgPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0Jyk7XG5jb25zdCBidXR0b25PcGVuUG9wdXBBdmF0YXIgPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWF2YXRhcicpO1xuXG5jb25zdCBmb3JtUG9wdXBFZGl0ID0gZG9jdW1lbnQuZm9ybXMucG9wdXBFZGl0O1xuY29uc3QgZm9ybVBvcHVwQWRkID0gZG9jdW1lbnQuZm9ybXMucG9wdXBBZGQ7XG5jb25zdCBmb3JtUG9wdXBBdmF0YXIgPSBkb2N1bWVudC5mb3Jtcy5wb3B1cEF2YXRhcjtcblxuY29uc3QgcG9wdXBWaWV3ID0gcGFnZS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV92aWV3Jyk7XG5jb25zdCBwb3B1cEltYWdlID0gcG9wdXBWaWV3LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcbmNvbnN0IHBvcHVwTmFtZUltYWdlID0gcG9wdXBWaWV3LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2FwdGlvbicpO1xuY29uc3QgaW5wdXROYW1lUHJvZmlsZSA9IGZvcm1Qb3B1cEVkaXQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX25hbWUnKTtcbmNvbnN0IGlucHV0RGVzY3JpcHRpb25Qcm9maWxlID0gZm9ybVBvcHVwRWRpdC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfZGVzY3JpcHRpb24nKTtcbmNvbnN0IGlucHV0QXZhdGFyID0gZm9ybVBvcHVwQXZhdGFyLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9hdmF0YXInKTtcblxuXG5leHBvcnQgeyBidXR0b25PcGVuUG9wdXBDcmVhdGVDYXJkLFxuICBidXR0b25PcGVuUG9wdXBFZGl0UHJvZmlsZSxcbiAgZm9ybVBvcHVwRWRpdCwgZm9ybVBvcHVwQWRkLFxuICBwb3B1cEltYWdlLCBwb3B1cE5hbWVJbWFnZSxcbiAgaW5wdXROYW1lUHJvZmlsZSwgaW5wdXREZXNjcmlwdGlvblByb2ZpbGUsXG4gIGZvcm1Qb3B1cEF2YXRhciwgYnV0dG9uT3BlblBvcHVwQXZhdGFyLFxuICBpbnB1dEF2YXRhciB9XG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gY29uZmlnLmZvcm1TZWxlY3RvcjtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xuICAgIHRoaXMuX2lucHV0cyA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIC8qINCh0LrRgNGL0YLQuNC1INC+0YjQuNCx0LrQuCAqL1xuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWVycm9yYCk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICB9XG5cbiAgLyog0J/QvtC60LDQtyDQvtGI0LjQsdC60LggKi9cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8qINCf0YDQvtCy0LXRgNC60LAg0LLQsNC70LjQtNC90L7RgdGC0Lgg0L/QvtC70LXQuSDQstCy0L7QtNCwICovXG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xuICAgIH1cbiAgfVxuXG4gIC8qINCj0LfQvdCw0LXQvCwg0LXRgdGC0Ywg0LvQuCDQvdC10LLQsNC70LjQtNC90YvQuSDQuNC90L/Rg9GCICovXG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRzLnNvbWUoKGlucHV0KSA9PlxuICAgICAgIWlucHV0LnZhbGlkaXR5LnZhbGlkKVxuICB9XG5cbiAgLyog0J/QtdGA0LXQutC70Y7Rh9C10L3QuNC1INGB0L7RgdGC0L7Rj9C90LjRjyDQutC90L7Qv9C60LggKi9cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gLyog0JHQu9C+0LrQuNGA0L7QstC60LAg0LrQvdC+0L/QutC4ICovXG5cbiAgZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICAvKiDQo9GB0YLQsNC90L7QstC60LAg0YHQu9GD0YjQsNGC0LXQu9C10LkgKi9cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgLyog0J3QtdC/0L7RgdGA0LXQtNGB0YLQstC10L3QvdC+0LUg0L/QvtC00LrQu9GO0YfQtdC90LjQtSDQv9GA0L7QstC10YDQutC4INC/0L7Qu9C10LkgKi9cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICAvKiDQo9C00LDQu9C10L3QuNC1INGB0L7QvtCx0YnQtdC90LjRjyDQstCw0LvQuNC00LDRhtC40LggKi9cblxuICByZW1vdmVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XG4gICAgfSlcbiAgfVxufVxuXG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVySWQpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVySWQpO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIGFkZEl0ZW1TdGFydChlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cblxuICByZW5kZXJJdGVtcyhkYXRhKSB7XG4gICAgZGF0YS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihlbGVtZW50KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKVxuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XG4gICAgfVxuICB9XG5cbiAgb3BlblBvcHVwKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZVBvcHVwKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICAvKiDQmtC90L7Qv9C60LAg0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60LggKi9cblxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9IHRoaXMuX2J1dHRvblN1Ym1pdFRleHQ7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSkge1xuICAgICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcbiAgICAgIH1cbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlJykpIHtcbiAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgcG9wdXBJbWFnZSwgcG9wdXBOYW1lSW1hZ2UpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gcG9wdXBJbWFnZTtcbiAgICB0aGlzLl9wb3B1cE5hbWVJbWFnZSA9IHBvcHVwTmFtZUltYWdlO1xuICB9XG5cbiAgb3BlblBvcHVwKG5hbWUsIGxpbmspIHtcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5fcG9wdXBOYW1lSW1hZ2UudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gbGluaztcblxuICAgIHN1cGVyLm9wZW5Qb3B1cCgpO1xuICB9XG5cblxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBmb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybVN1Ym1pdCA9IGZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xuICAgIHRoaXMuX2J1dHRvblN1Ym1pdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24nKTtcbiAgICB0aGlzLl9idXR0b25TdWJtaXRUZXh0ID0gdGhpcy5fYnV0dG9uU3VibWl0LnRleHRDb250ZW50O1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0VmFsdWVzTGlzdCA9IHt9O1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKCAoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0VmFsdWVzTGlzdFtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzTGlzdDtcbiAgfVxuXG4gIHNldElucHV0VmFsdWVzKGluZm8pIHtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LnZhbHVlID0gaW5mb1tpbnB1dC5uYW1lXVxuICAgIH0pXG4gIH1cblxuICBjbG9zZVBvcHVwKCkge1xuICAgIHN1cGVyLmNsb3NlUG9wdXAoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9mb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHtzZWxlY3Rvck5hbWUsIHNlbGVjdG9yRGVzY3JpcHRpb24sIHNlbGVjdG9yQXZhdGFyfSkge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvck5hbWUpO1xuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JEZXNjcmlwdGlvbik7XG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JBdmF0YXIpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGFib3V0OiB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQsXG4gICAgICBhdmF0YXI6IHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjXG4gICAgfVxuXG4gICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhci5zcmMgPSBkYXRhLmF2YXRhclxuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgdGhpcy5fdXJsID0gZGF0YS51cmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGRhdGEuaGVhZGVycztcbiAgfVxuXG4gIC8qINCe0LHRgNCw0LHQvtGC0LrQsCDQvtGC0LLQtdGC0LAg0YHQtdGA0LLQtdGA0LAgKi9cblxuICBfaGFuZGxlUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qINCX0LDQs9GA0YPQt9C60LAg0LrQsNGA0YLQvtGH0LXQuiDRgSDRgdC10YDQstC10YDQsCAqL1xuXG4gIGdldENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSlcbiAgfVxuXG4gIC8qINCU0L7QsdCw0LLQu9C10L3QuNC1INC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuCAqL1xuXG4gIGNyZWF0ZUNhcmQobmFtZSwgbGluaykge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lOiBuYW1lLCBsaW5rOiBsaW5rIH0pXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICB9XG5cbiAgLyog0KPQtNCw0LvQtdC90LjQtSDQutCw0YDRgtC+0YfQutC4ICovXG5cbiAgZGVsZXRlQ2FyZChpZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7aWR9YCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICB9XG5cbiAgLyog0JTQvtCx0LDQstC70LXQvdC40LUg0LvQsNC50LrQsCDQutCw0YDRgtC+0YfQutC1ICovXG5cbiAgYWRkTGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICB9XG5cbiAgLyog0KPQsdGA0LDRgtGMINC70LDQudC6INGBINC60LDRgNGC0L7Rh9C60LggKi9cblxuICBkZWxldGVMaWtlQ2FyZChpZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICB9XG5cbiAgLyog0JfQsNCz0YDRg9C30LrQsCDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUgKi9cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gIH1cblxuICAvKiDQoNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNC1INC/0YDQvtGE0LjQu9GPICovXG5cbiAgZWRpdFVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lOiBuYW1lLCBhYm91dDogYWJvdXQgfSlcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gIH1cblxuICAvKiDQmNC30LzQtdC90LXQvdC40LUg0LDQstCw0YLQsNGA0LAg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPICovXG5cbiAgZWRpdFVzZXJBdmF0YXIocGhvdG8pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXI6IHBob3RvIH0pXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9fYnV0dG9uJyk7XG4gICAgdGhpcy5fYnV0dG9uU3VibWl0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpO1xuICAgIHRoaXMuX2J1dHRvblN1Ym1pdFRleHQgPSB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQ7XG4gIH1cblxuICAvKiDQmtC90L7Qv9C60LAg0L/RgNC4INC30LDQs9GA0YPQt9C60LUgKi9cblxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9ICfQo9C00LDQu9C10L3QuNC1Li4uJztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uU3VibWl0LnRleHRDb250ZW50ID0gdGhpcy5fYnV0dG9uU3VibWl0VGV4dDtcbiAgICB9XG4gIH1cblxuICAvKiDQktGL0LfQvtCyINGE0YPQvdC60YbQuNC4INGD0LTQsNC70LXQvdC40Y8gKi9cblxuICBzZXRTdWJtaXRIYW5kbGVyKGRlbGV0ZUNhcmQpIHtcbiAgICB0aGlzLl9kZWxldGVDYXJkQ2xpY2sgPSBkZWxldGVDYXJkXG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9kZWxldGVDYXJkQ2xpY2soKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ2FyZCB9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgdmFsaWRhdGlvbkNvbmZpZywgcGVyc29uYWxEYXRhIH0gZnJvbSAnLi4vc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgYnV0dG9uT3BlblBvcHVwQ3JlYXRlQ2FyZCxcbiAgYnV0dG9uT3BlblBvcHVwRWRpdFByb2ZpbGUsXG4gIGZvcm1Qb3B1cEVkaXQsIGZvcm1Qb3B1cEFkZCxcbiAgcG9wdXBJbWFnZSwgcG9wdXBOYW1lSW1hZ2UsXG4gIGlucHV0TmFtZVByb2ZpbGUsIGlucHV0RGVzY3JpcHRpb25Qcm9maWxlLFxuICBmb3JtUG9wdXBBdmF0YXIsIGJ1dHRvbk9wZW5Qb3B1cEF2YXRhcixcbiAgaW5wdXRBdmF0YXIgfSBmcm9tICcuLi9zY3JpcHRzL3V0aWxzL2VsZW1lbnRzLmpzJztcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCAnLi9pbmRleC5jc3MnO1xuaW1wb3J0IEFwaSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzJztcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbic7XG5cbi8qINCf0L7QtNC60LvRjtGH0LXQvdC40LUg0LLQsNC70LjQtNCw0YbQuNC4ICovXG5cbmNvbnN0IHZhbGlkYXRpb25mb3JtUG9wdXBFZGl0ID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybVBvcHVwRWRpdCk7XG52YWxpZGF0aW9uZm9ybVBvcHVwRWRpdC5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHZhbGlkYXRpb25mb3JtUG9wdXBBZGQgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtUG9wdXBBZGQpO1xudmFsaWRhdGlvbmZvcm1Qb3B1cEFkZC5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHZhbGlkYXRpb25mb3JtUG9wdXBBdmF0YXIgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtUG9wdXBBdmF0YXIpO1xudmFsaWRhdGlvbmZvcm1Qb3B1cEF2YXRhci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbi8qINCf0L7QtNC60LvRjtGH0LXQvdC40LUgQXBpICovXG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkocGVyc29uYWxEYXRhKTtcblxubGV0IHVzZXJJZDtcblxuLyog0JTQsNC90L3Ri9C1INC/0YDQvtGE0LjQu9GPICovXG5cbmNvbnN0IHVzZXIgPSBuZXcgVXNlckluZm8oe1xuICBzZWxlY3Rvck5hbWU6ICcucHJvZmlsZV9fbmFtZScsXG4gIHNlbGVjdG9yRGVzY3JpcHRpb246ICcucHJvZmlsZV9fZGVzY3JpcHRpb24nLFxuICBzZWxlY3RvckF2YXRhcjogJy5wcm9maWxlX19hdmF0YXInXG59KTtcblxuLyog0JTQvtCx0LDQstC70LXQvdC40LUg0LzQsNGB0YHQuNCy0LAg0LrQsNGA0YLQvtGH0LXQuiAqL1xuXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcbiAgcmVuZGVyZXI6IChpdGVtcykgPT4ge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBjcmVhdGVDYXJkKGl0ZW1zKTtcblxuICAgIGNhcmRMaXN0LmFkZEl0ZW0oZWxlbWVudCk7XG4gIH1cbiAgfSwgJy5jYXJkcydcbik7XG5cbi8qINCh0L7Qt9C00LDQvdC40LUg0LrQsNGA0YLQvtGH0LXQuiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGEsICcjY2FyZHMnLCB1c2VySWQsIGhhbmRsZUNhcmRDbGljayxcbiAgeyBkZWxldGVDYXJkQ2xpY2s6IChjYXJkSWQpID0+IHtcbiAgICBwb3B1cERlbGV0ZUNhcmQub3BlblBvcHVwKCk7XG4gICAgcG9wdXBEZWxldGVDYXJkLnNldFN1Ym1pdEhhbmRsZXIoKCkgPT4ge1xuICAgICAgcG9wdXBEZWxldGVDYXJkLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gICAgICBhcGkuZGVsZXRlQ2FyZChjYXJkSWQpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICBjYXJkLmRlbGV0ZUNhcmQoKTtcbiAgICAgICAgICBwb3B1cERlbGV0ZUNhcmQuY2xvc2VQb3B1cCgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgIHBvcHVwRGVsZXRlQ2FyZC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgfSlcbiAgICB9KVxuICB9LFxuICBoYW5kbGVMaWtlOiAoY2FyZElkKSA9PiB7XG4gICAgYXBpLmFkZExpa2VDYXJkKGNhcmRJZClcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgY2FyZC5saWtlQ2FyZChyZXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgICAgIH0pO1xuICB9LFxuICByZW1vdmVMaWtlOiAoY2FyZElkKSA9PiB7XG4gICAgYXBpLmRlbGV0ZUxpa2VDYXJkKGNhcmRJZClcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGNhcmQubGlrZUNhcmQoZGF0YSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYNCf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LA6ICR7ZXJyfWApO1xuICAgICAgfSk7XG4gIH1cbiAgfVxuKTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuXG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuLyog0JfQsNCz0YDRg9C30LrQsCDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUg0Lgg0LrQsNGA0YLQvtGH0LXQuiDRgSDRgdC10YDQstC10YDQsCAqL1xuXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRDYXJkcygpXSlcbiAgLnRoZW4oKFt1c2VyRGF0YSwgY2FyZHNdKSA9PiB7XG4gICAgdXNlci5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xuICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKGNhcmRzKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhg0J/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsDogJHtlcnJ9YCk7XG4gIH1cbilcblxuLyog0J7RgtC60YDRi9GC0LjQtSDQuNC30L7QsdGA0LDQttC10L3QuNGPINC60LDRgNGC0L7Rh9C60LggKi9cblxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF90eXBlX3ZpZXcnLCBwb3B1cEltYWdlLCBwb3B1cE5hbWVJbWFnZSk7XG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2sobmFtZSwgbGluaykge1xuICBwb3B1cFdpdGhJbWFnZS5vcGVuUG9wdXAobmFtZSwgbGluayk7XG59XG5cbi8qINCY0LfQvNC10L3QtdC90LjQtSDQtNCw0L3QvdGL0YUg0L/RgNC+0YTQuNC70Y8gKi9cblxuY29uc3QgcG9wdXBFZGl0UHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9lZGl0JyxcbihkYXRhKSA9PiB7XG4gIHBvcHVwRWRpdFByb2ZpbGUucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgYXBpLmVkaXRVc2VySW5mbyhkYXRhLmlucHV0TmFtZVByb2ZpbGUsIGRhdGEuaW5wdXREZXNjcmlwdGlvblByb2ZpbGUpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHVzZXIuc2V0VXNlckluZm8oZGF0YSk7XG4gICAgICBwb3B1cEVkaXRQcm9maWxlLmNsb3NlUG9wdXAoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhg0J/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsDogJHtlcnJ9YCk7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBwb3B1cEVkaXRQcm9maWxlLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgIH0pXG59KVxuXG5wb3B1cEVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmJ1dHRvbk9wZW5Qb3B1cEVkaXRQcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICB2YWxpZGF0aW9uZm9ybVBvcHVwRWRpdC5yZW1vdmVWYWxpZGF0aW9uKCk7XG4gIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IHVzZXIuZ2V0VXNlckluZm8oKTtcblxuICBpbnB1dE5hbWVQcm9maWxlLnZhbHVlID0gbmFtZTtcbiAgaW5wdXREZXNjcmlwdGlvblByb2ZpbGUudmFsdWUgPSBhYm91dDtcblxuICBwb3B1cEVkaXRQcm9maWxlLm9wZW5Qb3B1cCgpO1xufSlcblxuLyog0JTQvtCx0LDQstC70LXQvdC40LUg0L3QvtCy0YvRhSDQutCw0YDRgtC+0YfQtdC6ICovXG5cbmNvbnN0IHBvcHVwQ3JlYXRlQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9jcmVhdGUnLFxuKGRhdGEpID0+IHtcbiAgcG9wdXBDcmVhdGVDYXJkLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gIGFwaS5jcmVhdGVDYXJkKGRhdGEubmFtZSwgZGF0YS5saW5rKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBjYXJkTGlzdC5hZGRJdGVtU3RhcnQoY3JlYXRlQ2FyZChkYXRhKSk7XG4gICAgICBwb3B1cENyZWF0ZUNhcmQuY2xvc2VQb3B1cCgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHBvcHVwQ3JlYXRlQ2FyZC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICB9KVxufSk7XG5cbnBvcHVwQ3JlYXRlQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5idXR0b25PcGVuUG9wdXBDcmVhdGVDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICB2YWxpZGF0aW9uZm9ybVBvcHVwQWRkLnJlbW92ZVZhbGlkYXRpb24oKTtcbiAgcG9wdXBDcmVhdGVDYXJkLm9wZW5Qb3B1cCgpO1xufSk7XG5cbi8qINCY0LfQvNC10L3QtdC90LjQtSDQsNCy0LDRgtCw0YDQsCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8gKi9cblxuY29uc3QgcG9wdXBBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfYXZhdGFyJyxcbihkYXRhKSA9PiB7XG4gIHBvcHVwQXZhdGFyLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gIGFwaS5lZGl0VXNlckF2YXRhcihkYXRhLmlucHV0QXZhdGFyKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICB1c2VyLnNldFVzZXJJbmZvKGRhdGEpO1xuICAgICAgcG9wdXBBdmF0YXIuY2xvc2VQb3B1cCgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHBvcHVwQXZhdGFyLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgIH0pXG59KTtcbnBvcHVwQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmJ1dHRvbk9wZW5Qb3B1cEF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgdmFsaWRhdGlvbmZvcm1Qb3B1cEF2YXRhci5yZW1vdmVWYWxpZGF0aW9uKCk7XG4gIHBvcHVwQXZhdGFyLm9wZW5Qb3B1cCgpO1xufSlcblxuLyog0J/QvtC00YLQstC10YDQttC00LXQvdC40LUg0YPQtNCw0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4ICovXG5cbmNvbnN0IHBvcHVwRGVsZXRlQ2FyZCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oJy5wb3B1cF90eXBlX2RlbGV0ZScpXG5cbnBvcHVwRGVsZXRlQ2FyZC5zZXRFdmVudExpc3RlbmVycygpXG5cblxuXG5cblxuIl0sIm5hbWVzIjpbIkNhcmQiLCJkYXRhIiwidGVtcGxhdGVJZCIsInVzZXJJZCIsImhhbmRsZUNhcmRDbGljayIsIl9yZWYiLCJkZWxldGVDYXJkQ2xpY2siLCJoYW5kbGVMaWtlIiwicmVtb3ZlTGlrZSIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZElkIiwiX2lkIiwiX2xpa2VzIiwibGlrZXMiLCJfb3duZXJJZCIsIm93bmVyIiwiX3RlbXBsYXRlSWQiLCJfdXNlcklkIiwiX2hhbmRsZUNhcmRDbGljayIsIl9kZWxldGVDYXJkQ2xpY2siLCJfaGFuZGxlTGlrZSIsIl9yZW1vdmVMaWtlIiwia2V5IiwidmFsdWUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2xpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJ0b2dnbGUiLCJfbGlrZUNvdW50ZXIiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsIl90aGlzIiwic29tZSIsInVzZXIiLCJhZGRMaWtlIiwiX2VsZW1lbnQiLCJfZGVsZXRlQnV0dG9uIiwiX3RoaXMyIiwiX2NhcmRJbWFnZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjb250YWlucyIsIl9nZXRUZW1wbGF0ZSIsIl90aXRsZUNhcmQiLCJfbGlrZXNVc2VyIiwiYWx0Iiwic3JjIiwiX3JlbW92ZURlbGV0ZUJ1dHRvbiIsIl9zZXRFdmVudExpc3RlbmVycyIsInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInBhZ2UiLCJidXR0b25PcGVuUG9wdXBDcmVhdGVDYXJkIiwiYnV0dG9uT3BlblBvcHVwRWRpdFByb2ZpbGUiLCJidXR0b25PcGVuUG9wdXBBdmF0YXIiLCJmb3JtUG9wdXBFZGl0IiwiZm9ybXMiLCJwb3B1cEVkaXQiLCJmb3JtUG9wdXBBZGQiLCJwb3B1cEFkZCIsImZvcm1Qb3B1cEF2YXRhciIsInBvcHVwQXZhdGFyIiwicG9wdXBWaWV3IiwicG9wdXBJbWFnZSIsInBvcHVwTmFtZUltYWdlIiwiaW5wdXROYW1lUHJvZmlsZSIsImlucHV0RGVzY3JpcHRpb25Qcm9maWxlIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm0iLCJfZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2lucHV0cyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRWxlbWVudCIsImlucHV0IiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJTZWN0aW9uIiwiY29udGFpbmVySWQiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJldnQiLCJjbG9zZVBvcHVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImlzTG9hZGluZyIsIl9idXR0b25TdWJtaXQiLCJfYnV0dG9uU3VibWl0VGV4dCIsInRhcmdldCIsIlBvcHVwV2l0aEltYWdlIiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwiY2FsbCIsIl9wb3B1cEltYWdlIiwiX3BvcHVwTmFtZUltYWdlIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtU3VibWl0IiwiX2Zvcm1TdWJtaXQiLCJpbnB1dFZhbHVlc0xpc3QiLCJpbmZvIiwicmVzZXQiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIlVzZXJJbmZvIiwic2VsZWN0b3JOYW1lIiwic2VsZWN0b3JEZXNjcmlwdGlvbiIsInNlbGVjdG9yQXZhdGFyIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVEZXNjcmlwdGlvbiIsIl9wcm9maWxlQXZhdGFyIiwiYWJvdXQiLCJhdmF0YXIiLCJBcGkiLCJfdXJsIiwidXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsIl9oYW5kbGVSZXNwb25zZSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZElkIiwicGhvdG8iLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJfYnV0dG9uIiwiZGVsZXRlQ2FyZCIsInZhbGlkYXRpb25mb3JtUG9wdXBFZGl0IiwiZW5hYmxlVmFsaWRhdGlvbiIsInZhbGlkYXRpb25mb3JtUG9wdXBBZGQiLCJ2YWxpZGF0aW9uZm9ybVBvcHVwQXZhdGFyIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImNhcmRMaXN0IiwiaXRlbXMiLCJjcmVhdGVDYXJkIiwiYWRkSXRlbSIsImNhcmQiLCJwb3B1cERlbGV0ZUNhcmQiLCJvcGVuUG9wdXAiLCJzZXRTdWJtaXRIYW5kbGVyIiwicmVuZGVyTG9hZGluZyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImZpbmFsbHkiLCJhZGRMaWtlQ2FyZCIsImxpa2VDYXJkIiwiZGVsZXRlTGlrZUNhcmQiLCJnZW5lcmF0ZUNhcmQiLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldENhcmRzIiwiX3JlZjIiLCJ1c2VyRGF0YSIsImNhcmRzIiwic2V0VXNlckluZm8iLCJyZW5kZXJJdGVtcyIsInBvcHVwV2l0aEltYWdlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cEVkaXRQcm9maWxlIiwiZWRpdFVzZXJJbmZvIiwicmVtb3ZlVmFsaWRhdGlvbiIsIl91c2VyJGdldFVzZXJJbmZvIiwicG9wdXBDcmVhdGVDYXJkIiwiYWRkSXRlbVN0YXJ0IiwiZWRpdFVzZXJBdmF0YXIiLCJpbnB1dEF2YXRhciJdLCJzb3VyY2VSb290IjoiIn0=