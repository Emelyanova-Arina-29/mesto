(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e,n,r,o,i){var u=i.deleteCardClick,a=i.handleLike,c=i.removeLike;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._cardId=e._id,this._likes=e.likes,this._ownerId=e.owner._id,this._templateId=n,this._userId=r,this._handleCardClick=o,this._deleteCardClick=u,this._handleLike=a,this._removeLike=c}var n,r;return n=t,r=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateId).content.querySelector(".card").cloneNode(!0)}},{key:"addLike",value:function(){this._likeButton.classList.add("card__like_active")}},{key:"removeLike",value:function(){this._likeButton.classList.remove("card__like_active")}},{key:"likeCard",value:function(t){this._likeButton.classList.toggle("card__like_active"),this._likes=t.likes,this._likeCounter.textContent=this._likes.length}},{key:"_likesUser",value:function(){var t=this;this._likes.some((function(e){return t._userId===e._id}))&&this.addLike()}},{key:"deleteCard",value:function(){this._element.remove(),this._element=null}},{key:"_removeDeleteButton",value:function(){this._userId!==this._ownerId&&this._deleteButton.remove()}},{key:"_setEventListeners",value:function(){var t=this;this._cardImage.addEventListener("click",(function(){t._handleCardClick(t._name,t._link)})),this._likeButton.addEventListener("click",(function(){t._likeButton.classList.contains("card__like_active")?t._removeLike(t._cardId):t._handleLike(t._cardId)})),this._deleteButton.addEventListener("click",(function(){t._deleteCardClick(t._cardId)}))}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".card__like"),this._titleCard=this._element.querySelector(".card__title"),this._cardImage=this._element.querySelector(".card__image"),this._deleteButton=this._element.querySelector(".card__delete"),this._likeCounter=this._element.querySelector(".card__number-like"),this._likesUser(),this._cardImage.alt=this._name,this._titleCard.textContent=this._name,this._cardImage.src=this._link,this._removeDeleteButton(),this._likeCounter.textContent=this._likes.length,this._setEventListeners(),this._element}},{key:"getNameImage",value:function(){return this._name}},{key:"getLinkImage",value:function(){return this._link}}],r&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(),r={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"},o=document.querySelector(".page"),i=o.querySelector(".profile__add"),u=o.querySelector(".profile__edit"),a=o.querySelector(".profile__edit-avatar"),c=document.forms.popupEdit,l=document.forms.popupAdd,s=document.forms.popupAvatar,f=o.querySelector(".popup_type_view"),p=f.querySelector(".popup__image"),y=f.querySelector(".popup__caption"),d=c.querySelector(".popup__input_type_name"),h=c.querySelector(".popup__input_type_description");function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===v(o)?o:String(o)),r)}var o}s.querySelector(".popup__input_type_avatar");var m=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=n,this._inputs=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector)}var e,n;return e=t,(n=[{key:"_hideInputError",value:function(t){var e=this._form.querySelector(".".concat(t.id,"-error"));e.classList.remove(this._errorClass),e.textContent="",t.classList.remove(this._inputErrorClass)}},{key:"_showInputError",value:function(t){var e=this._form.querySelector(".".concat(t.id,"-error"));e.classList.add(this._errorClass),e.textContent=t.validationMessage,t.classList.add(this._inputErrorClass)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_hasInvalidInput",value:function(){return this._inputs.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.disableButton():(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"disableButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"_setEventListeners",value:function(){var t=this;this._toggleButtonState(),this._inputs.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"removeValidation",value:function(){var t=this;this._toggleButtonState(),this._inputs.forEach((function(e){t._hideInputError(e)}))}}])&&_(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===b(o)?o:String(o)),r)}var o}var g=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"addItem",value:function(t){this._container.append(t)}},{key:"addItemStart",value:function(t){this._container.prepend(t)}},{key:"renderItems",value:function(t){var e=this;t.forEach((function(t){e._renderer(t)}))}}])&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===k(o)?o:String(o)),r)}var o}var P=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.closePopup()}},{key:"openPopup",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"closePopup",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){e.target.classList.contains("popup_opened")&&t.closePopup(),e.target.classList.contains("popup__close")&&t.closePopup()}))}}])&&w(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==E(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===E(o)?o:String(o)),r)}var o}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=L(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},j.apply(this,arguments)}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}function L(t){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},L(t)}var I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=L(r);if(o){var n=L(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,t))._popupImage=e,r._popupNameImage=n,r}return e=u,(n=[{key:"openPopup",value:function(t,e){this._popupImage.alt=t,this._popupNameImage.textContent=t,this._popupImage.src=e,j(L(u.prototype),"openPopup",this).call(this)}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(P);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==T(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===T(o)?o:String(o)),r)}var o}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},q.apply(this,arguments)}function B(t,e){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},B(t,e)}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=x(r);if(o){var n=x(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._formSubmit=e,n._form=n._popup.querySelector(".popup__form"),n._inputs=n._form.querySelectorAll(".popup__input"),n._buttonSubmit=n._form.querySelector(".popup__button"),n._buttonSubmitText=n._buttonSubmit.textContent,n}return e=u,(n=[{key:"_getInputValues",value:function(){var t={};return this._inputs.forEach((function(e){t[e.name]=e.value})),t}},{key:"renderLoading",value:function(t){this._buttonSubmit.textContent=t?"Сохранение...":this._buttonSubmitText}},{key:"setInputValues",value:function(t){this._inputs.forEach((function(e){e.value=t[e.name]}))}},{key:"closePopup",value:function(){q(x(u.prototype),"closePopup",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var t=this;q(x(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._formSubmit(t._getInputValues())}))}}])&&R(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(P);function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==D(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===D(o)?o:String(o)),r)}var o}var N=function(){function t(e){var n=e.selectorName,r=e.selectorDescription,o=e.selectorAvatar;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._profileName=document.querySelector(n),this._profileDescription=document.querySelector(r),this._profileAvatar=document.querySelector(o)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,about:this._profileDescription.textContent,avatar:this._profileAvatar.src}}},{key:"setUserInfo",value:function(t){this._profileName.textContent=t.name,this._profileDescription.textContent=t.about,this._profileAvatar.src=t.avatar}}])&&U(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==V(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===V(o)?o:String(o)),r)}var o}var J=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e.url,this._headers=e.headers}var e,n;return e=t,(n=[{key:"_handleResponse",value:function(t){return t.ok?t.json():Promise.reject("Произошла ошибка: ".concat(t.status))}},{key:"getCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then(this._handleResponse)}},{key:"createCard",value:function(t,e){return fetch("".concat(this._url,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({name:t,link:e})}).then(this._handleResponse)}},{key:"deleteCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t),{headers:this._headers,method:"DELETE"}).then(this._handleResponse)}},{key:"addLikeCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{headers:this._headers,method:"PUT"}).then(this._handleResponse)}},{key:"deleteLikeCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{headers:this._headers,method:"DELETE"}).then(this._handleResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then(this._handleResponse)}},{key:"editUserInfo",value:function(t,e){return fetch("".concat(this._url,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:t,about:e})}).then(this._handleResponse)}},{key:"editUserAvatar",value:function(t){return fetch("".concat(this._url,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:t})}).then(this._handleResponse)}}])&&H(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==M(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===M(o)?o:String(o)),r)}var o}function $(){return $="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=G(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},$.apply(this,arguments)}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}function G(t){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},G(t)}var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=G(r);if(o){var n=G(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._form=e._popup.querySelector(".popup__form"),e._button=e._form.querySelectorAll(".popup__button"),e._buttonSubmit=e._form.querySelector(".popup__button"),e._buttonSubmitText=e._buttonSubmit.textContent,e}return e=u,(n=[{key:"renderLoading",value:function(t){this._buttonSubmit.textContent=t?"Удаление...":this._buttonSubmitText}},{key:"setSubmitHandler",value:function(t){this._deleteCardClick=t}},{key:"setEventListeners",value:function(){var t=this;$(G(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._deleteCardClick()}))}}])&&z(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(P);function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var W=new m(r,c);W.enableValidation();var X=new m(r,l);X.enableValidation();var Y=new m(r,s);Y.enableValidation();var Z,tt=new J({url:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{authorization:"f1580dcf-100f-4c1e-a333-5ef7b032595f","Content-Type":"application/json"}}),et=new N({selectorName:".profile__name",selectorDescription:".profile__description",selectorAvatar:".profile__avatar"}),nt=new g({renderer:function(t){var e=rt(t);nt.addItem(e)}},".cards");function rt(t){var e=new n(t,"#cards",Z,it,{deleteCardClick:function(t){lt.openPopup(),lt.setSubmitHandler((function(){lt.renderLoading(!0),tt.deleteCard(t).then((function(){e.deleteCard(),lt.closePopup()})).catch((function(t){console.log("Произошла ошибка: ".concat(t))})).finally((function(){lt.renderLoading(!1)}))}))},handleLike:function(t){tt.addLikeCard(t).then((function(t){e.likeCard(t)})).catch((function(t){console.log("Произошла ошибка: ".concat(t))}))},removeLike:function(t){tt.deleteLikeCard(t).then((function(t){e.likeCard(t)})).catch((function(t){console.log("Произошла ошибка: ".concat(t))}))}});return e.generateCard()}Promise.all([tt.getUserInfo(),tt.getCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];et.setUserInfo(o),Z=o._id,nt.renderItems(i)})).catch((function(t){console.log("Произошла ошибка: ".concat(t))}));var ot=new I(".popup_type_view",p,y);function it(t,e){ot.openPopup(t,e)}ot.setEventListeners();var ut=new A(".popup_type_edit",(function(t){ut.renderLoading(!0),tt.editUserInfo(t.inputNameProfile,t.inputDescriptionProfile).then((function(t){et.setUserInfo(t),ut.closePopup()})).catch((function(t){console.log("Произошла ошибка: ".concat(t))})).finally((function(){ut.renderLoading(!1)}))}));ut.setEventListeners(),u.addEventListener("click",(function(){W.removeValidation();var t=et.getUserInfo(),e=t.name,n=t.about;d.value=e,h.value=n,ut.openPopup()}));var at=new A(".popup_type_create",(function(t){at.renderLoading(!0),tt.createCard(t.name,t.link).then((function(t){nt.addItemStart(rt(t)),at.closePopup()})).catch((function(t){console.log("Произошла ошибка: ".concat(t))})).finally((function(){at.renderLoading(!1)}))}));at.setEventListeners(),i.addEventListener("click",(function(){X.removeValidation(),at.openPopup()}));var ct=new A(".popup_type_avatar",(function(t){ct.renderLoading(!0),tt.editUserAvatar(t.inputAvatar).then((function(t){et.setUserInfo(t),ct.closePopup()})).catch((function(t){console.log("Произошла ошибка: ".concat(t))})).finally((function(){ct.renderLoading(!1)}))}));ct.setEventListeners(),a.addEventListener("click",(function(){Y.removeValidation(),ct.openPopup()}));var lt=new K(".popup_type_delete");lt.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LG9CQUVoQnBKLEVBQTBCakIsaUJBQWlCLFNBQVMsV0FDbERzSSxFQUF1QmtDLG1CQUN2QkUsR0FBZ0IxQixXQUNsQixJQUlBLElBQU10SCxHQUFjLElBQUkrRCxFQUFjLHNCQUN0QyxTQUFDekksR0FDQzBFLEdBQVl3SCxlQUFjLEdBQzFCVixHQUFJb0MsZUFBZTVOLEVBQUs2TixhQUNyQnBELE1BQUssU0FBQ3pLLEdBQ0wwQyxHQUFLd0ssWUFBWWxOLEdBQ2pCMEUsR0FBWWtELFlBQ2QsSUFDQ3VFLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSSxxQkFBRHJHLE9BQXNCbUcsR0FDbkMsSUFDQ0csU0FBUSxXQUNQN0gsR0FBWXdILGVBQWMsRUFDNUIsR0FDSixJQUNBeEgsR0FBWTJJLG9CQUVabEosRUFBc0JuQixpQkFBaUIsU0FBUyxXQUM5Q3VJLEVBQTBCaUMsbUJBQzFCOUksR0FBWXNILFdBQ2QsSUFJQSxJQUFNRCxHQUFrQixJQUFJZCxFQUFzQixzQkFFbERjLEdBQWdCc0IsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL2VsZW1lbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIHRlbXBsYXRlSWQsIHVzZXJJZCwgaGFuZGxlQ2FyZENsaWNrLCB7IGRlbGV0ZUNhcmRDbGljaywgaGFuZGxlTGlrZSwgcmVtb3ZlTGlrZSB9KSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XG4gICAgdGhpcy5fdGVtcGxhdGVJZCA9IHRlbXBsYXRlSWQ7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9kZWxldGVDYXJkQ2xpY2sgPSBkZWxldGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlTGlrZSA9IGhhbmRsZUxpa2U7XG4gICAgdGhpcy5fcmVtb3ZlTGlrZSA9IHJlbW92ZUxpa2U7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVJZCkuXG4gICAgY29udGVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZCcpLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkO1xuICB9XG5cbiAgLyog0J/QvtGB0YLQsNCy0LjRgtGMINC70LDQudC6ICovXG5cbiAgYWRkTGlrZSgpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhcmRfX2xpa2VfYWN0aXZlJyk7XG4gIH07XG5cbiAgLyog0KPQsdGA0LDRgtGMINC70LDQudC6ICovXG5cbiAgcmVtb3ZlTGlrZSgpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2NhcmRfX2xpa2VfYWN0aXZlJyk7XG4gIH07XG5cbiAgLyog0JvQsNC50LrQvdGD0YLRjCDQutCw0YDRgtC+0YfQutGDICovXG5cbiAgbGlrZUNhcmQoZGF0YSkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9fbGlrZV9hY3RpdmUnKTtcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy5fbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG4gIH07XG5cbiAgLyog0JvQsNC50LrQvdGD0Lsg0LvQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0LrQsNGA0YLQvtGH0LrRgz8gKi9cblxuICBfbGlrZXNVc2VyKCkge1xuICAgIGlmICh0aGlzLl9saWtlcy5zb21lKCh1c2VyKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fdXNlcklkID09PSB1c2VyLl9pZDtcbiAgICB9KSkge1xuICAgICAgdGhpcy5hZGRMaWtlKCk7XG4gICAgfVxuICB9XG5cbiAgLyog0KPQtNCw0LvQuNGC0Ywg0LrQsNGA0YLQvtGH0LrRgyAqL1xuXG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIC8qINCj0LHQuNGA0LDQtdC8INC60L3QvtC/0LrRgyDRg9C00LDQu9C10L3QuNGPINGDINGH0YPQttC40YUg0LrQsNGA0YLQvtGH0LXQuiAqL1xuXG4gIF9yZW1vdmVEZWxldGVCdXR0b24oKSB7XG4gICAgaWYgKHRoaXMuX3VzZXJJZCAhPT0gdGhpcy5fb3duZXJJZCkge1xuICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLnJlbW92ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qINCd0LDQstC10YjQuNCy0LDQtdC8INC+0LHRgNCw0LHQvtGC0YfQuNC60LggKi9cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xuICAgIH0pO1xuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcmRfX2xpa2VfYWN0aXZlJykpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlTGlrZSh0aGlzLl9jYXJkSWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZSh0aGlzLl9jYXJkSWQpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2RlbGV0ZUNhcmRDbGljayh0aGlzLl9jYXJkSWQpO1xuICAgIH0pO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlJyk7XG4gICAgdGhpcy5fdGl0bGVDYXJkID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2RlbGV0ZScpO1xuICAgIHRoaXMuX2xpa2VDb3VudGVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbnVtYmVyLWxpa2UnKTtcblxuICAgIHRoaXMuX2xpa2VzVXNlcigpO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fdGl0bGVDYXJkLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9yZW1vdmVEZWxldGVCdXR0b24oKTtcbiAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICBnZXROYW1lSW1hZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX25hbWU7XG4gIH1cblxuICBnZXRMaW5rSW1hZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xpbms7XG4gIH1cbn1cbiIsIi8qINCc0LDRgdGB0LjQsiDQutCw0YDRgtC+0YfQtdC6ICovXG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiAn0JDRgNGF0YvQtycsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnJ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZydcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQmNCy0LDQvdC+0LLQvicsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9pdmFub3ZvLmpwZydcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQmtCw0LzRh9Cw0YLQutCwJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L0nLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZydcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQkdCw0LnQutCw0LsnLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYmFpa2FsLmpwZydcbiAgfVxuXTtcblxuLyog0J7QsdGK0LXQutGCLCDRgdC+0YHRgtC+0Y/RidC40Lkg0LjQtyDRgdCy0L7QudGB0YLQsiwg0LfQvdCw0YfQtdC90LjRj9C80Lgg0LrQvtGC0L7RgNGL0YUg0Y/QstC70Y/RjtGC0YHRjyDQutC70LDRgdGB0YssINC90LXQvtCx0YXQvtC00LjQvNGL0LUg0LTQu9GPINGD0L3QuNCy0LXRgNGB0LDQu9GM0L3QvtCz0L4g0L3QsNC/0LjRgdCw0L3QuNGPINC60L7QtNCwINCy0LDQu9C40LTQsNGG0LjQuCAqL1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uJyxcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b25fZGlzYWJsZWQnLFxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXQtZXJyb3JfdmlzaWJsZSdcbn07XG5cbmV4cG9ydCBjb25zdCBwZXJzb25hbERhdGEgPSB7XG4gIHVybDonaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02MCcsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnZjE1ODBkY2YtMTAwZi00YzFlLWEzMzMtNWVmN2IwMzI1OTVmJyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gIH1cbn1cbiIsImNvbnN0IHBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZScpO1xuXG5jb25zdCBidXR0b25PcGVuUG9wdXBDcmVhdGVDYXJkID0gcGFnZS5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkJyk7XG5jb25zdCBidXR0b25PcGVuUG9wdXBFZGl0UHJvZmlsZSA9IHBhZ2UucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQnKTtcbmNvbnN0IGJ1dHRvbk9wZW5Qb3B1cEF2YXRhciA9IHBhZ2UucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYXZhdGFyJyk7XG5cbmNvbnN0IGZvcm1Qb3B1cEVkaXQgPSBkb2N1bWVudC5mb3Jtcy5wb3B1cEVkaXQ7XG5jb25zdCBmb3JtUG9wdXBBZGQgPSBkb2N1bWVudC5mb3Jtcy5wb3B1cEFkZDtcbmNvbnN0IGZvcm1Qb3B1cEF2YXRhciA9IGRvY3VtZW50LmZvcm1zLnBvcHVwQXZhdGFyO1xuXG5jb25zdCBwb3B1cFZpZXcgPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX3ZpZXcnKTtcbmNvbnN0IHBvcHVwSW1hZ2UgPSBwb3B1cFZpZXcucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xuY29uc3QgcG9wdXBOYW1lSW1hZ2UgPSBwb3B1cFZpZXcucXVlcnlTZWxlY3RvcignLnBvcHVwX19jYXB0aW9uJyk7XG5jb25zdCBpbnB1dE5hbWVQcm9maWxlID0gZm9ybVBvcHVwRWRpdC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfbmFtZScpO1xuY29uc3QgaW5wdXREZXNjcmlwdGlvblByb2ZpbGUgPSBmb3JtUG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9kZXNjcmlwdGlvbicpO1xuY29uc3QgaW5wdXRBdmF0YXIgPSBmb3JtUG9wdXBBdmF0YXIucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX2F2YXRhcicpO1xuXG5cbmV4cG9ydCB7IGJ1dHRvbk9wZW5Qb3B1cENyZWF0ZUNhcmQsXG4gIGJ1dHRvbk9wZW5Qb3B1cEVkaXRQcm9maWxlLFxuICBmb3JtUG9wdXBFZGl0LCBmb3JtUG9wdXBBZGQsXG4gIHBvcHVwSW1hZ2UsIHBvcHVwTmFtZUltYWdlLFxuICBpbnB1dE5hbWVQcm9maWxlLCBpbnB1dERlc2NyaXB0aW9uUHJvZmlsZSxcbiAgZm9ybVBvcHVwQXZhdGFyLCBidXR0b25PcGVuUG9wdXBBdmF0YXIsXG4gIGlucHV0QXZhdGFyIH1cbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcblxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm0pIHtcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBjb25maWcuZm9ybVNlbGVjdG9yO1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm07XG4gICAgdGhpcy5faW5wdXRzID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgLyog0KHQutGA0YvRgtC40LUg0L7RiNC40LHQutC4ICovXG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gIH1cblxuICAvKiDQn9C+0LrQsNC3INC+0YjQuNCx0LrQuCAqL1xuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWVycm9yYCk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICB9XG5cbiAgLyog0J/RgNC+0LLQtdGA0LrQsCDQstCw0LvQuNC00L3QvtGB0YLQuCDQv9C+0LvQtdC5INCy0LLQvtC00LAgKi9cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KSB7XG4gICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XG4gICAgfVxuICB9XG5cbiAgLyog0KPQt9C90LDQtdC8LCDQtdGB0YLRjCDQu9C4INC90LXQstCw0LvQuNC00L3Ri9C5INC40L3Qv9GD0YIgKi9cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dHMuc29tZSgoaW5wdXQpID0+XG4gICAgICAhaW5wdXQudmFsaWRpdHkudmFsaWQpXG4gIH1cblxuICAvKiDQn9C10YDQtdC60LvRjtGH0LXQvdC40LUg0YHQvtGB0YLQvtGP0L3QuNGPINC60L3QvtC/0LrQuCAqL1xuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAvKiDQkdC70L7QutC40YDQvtCy0LrQsCDQutC90L7Qv9C60LggKi9cblxuICBkaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qINCj0YHRgtCw0L3QvtCy0LrQsCDRgdC70YPRiNCw0YLQtdC70LXQuSAqL1xuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICAvKiDQndC10L/QvtGB0YDQtdC00YHRgtCy0LXQvdC90L7QtSDQv9C+0LTQutC70Y7Rh9C10L3QuNC1INC/0YDQvtCy0LXRgNC60Lgg0L/QvtC70LXQuSAqL1xuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIC8qINCj0LTQsNC70LXQvdC40LUg0YHQvtC+0LHRidC10L3QuNGPINCy0LDQu9C40LTQsNGG0LjQuCAqL1xuXG4gIHJlbW92ZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcbiAgICB9KVxuICB9XG59XG5cbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJJZCkge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJJZCk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICB9XG5cbiAgYWRkSXRlbVN0YXJ0KGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKGRhdGEpIHtcbiAgICBkYXRhLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpXG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcbiAgICB9XG4gIH1cblxuICBvcGVuUG9wdXAoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlUG9wdXAoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykpIHtcbiAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XG4gICAgICB9XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZScpKSB7XG4gICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHBvcHVwSW1hZ2UsIHBvcHVwTmFtZUltYWdlKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHBvcHVwSW1hZ2U7XG4gICAgdGhpcy5fcG9wdXBOYW1lSW1hZ2UgPSBwb3B1cE5hbWVJbWFnZTtcbiAgfVxuXG4gIG9wZW5Qb3B1cChuYW1lLCBsaW5rKSB7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX3BvcHVwTmFtZUltYWdlLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XG5cbiAgICBzdXBlci5vcGVuUG9wdXAoKTtcbiAgfVxuXG5cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgZm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Zvcm1TdWJtaXQgPSBmb3JtU3VibWl0O1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbiAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcbiAgICB0aGlzLl9idXR0b25TdWJtaXQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uJyk7XG4gICAgdGhpcy5fYnV0dG9uU3VibWl0VGV4dCA9IHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dFZhbHVlc0xpc3QgPSB7fTtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCggKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc0xpc3RbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiBpbnB1dFZhbHVlc0xpc3Q7XG4gIH1cblxuICAvKiDQmtC90L7Qv9C60LAg0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60LggKi9cblxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9IHRoaXMuX2J1dHRvblN1Ym1pdFRleHQ7XG4gICAgfVxuICB9XG5cbiAgc2V0SW5wdXRWYWx1ZXMoaW5mbykge1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQudmFsdWUgPSBpbmZvW2lucHV0Lm5hbWVdXG4gICAgfSlcbiAgfVxuXG4gIGNsb3NlUG9wdXAoKSB7XG4gICAgc3VwZXIuY2xvc2VQb3B1cCgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2Zvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3Ioe3NlbGVjdG9yTmFtZSwgc2VsZWN0b3JEZXNjcmlwdGlvbiwgc2VsZWN0b3JBdmF0YXJ9KSB7XG4gICAgdGhpcy5fcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yTmFtZSk7XG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvckRlc2NyaXB0aW9uKTtcbiAgICB0aGlzLl9wcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvckF2YXRhcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcbiAgICAgIGF2YXRhcjogdGhpcy5fcHJvZmlsZUF2YXRhci5zcmNcbiAgICB9XG5cbiAgICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBzZXRVc2VySW5mbyhkYXRhKSB7XG4gICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcbiAgICB0aGlzLl9wcm9maWxlQXZhdGFyLnNyYyA9IGRhdGEuYXZhdGFyXG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICB0aGlzLl91cmwgPSBkYXRhLnVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gZGF0YS5oZWFkZXJzO1xuICB9XG5cbiAgLyog0J7QsdGA0LDQsdC+0YLQutCwINC+0YLQstC10YLQsCDRgdC10YDQstC10YDQsCAqL1xuXG4gIF9oYW5kbGVSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfVxuICB9XG5cbiAgLyog0JfQsNCz0YDRg9C30LrQsCDQutCw0YDRgtC+0YfQtdC6INGBINGB0LXRgNCy0LXRgNCwICovXG5cbiAgZ2V0Q2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICB9XG5cbiAgLyog0JTQvtCx0LDQstC70LXQvdC40LUg0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4ICovXG5cbiAgY3JlYXRlQ2FyZChuYW1lLCBsaW5rKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWU6IG5hbWUsIGxpbms6IGxpbmsgfSlcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gIH1cblxuICAvKiDQo9C00LDQu9C10L3QuNC1INC60LDRgNGC0L7Rh9C60LggKi9cblxuICBkZWxldGVDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtpZH1gLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gIH1cblxuICAvKiDQlNC+0LHQsNCy0LvQtdC90LjQtSDQu9Cw0LnQutCwINC60LDRgNGC0L7Rh9C60LUgKi9cblxuICBhZGRMaWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gIH1cblxuICAvKiDQo9Cx0YDQsNGC0Ywg0LvQsNC50Log0YEg0LrQsNGA0YLQvtGH0LrQuCAqL1xuXG4gIGRlbGV0ZUxpa2VDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gIH1cblxuICAvKiDQl9Cw0LPRgNGD0LfQutCwINC40L3RhNC+0YDQvNCw0YbQuNC4INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtSAqL1xuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSlcbiAgfVxuXG4gIC8qINCg0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40LUg0L/RgNC+0YTQuNC70Y8gKi9cblxuICBlZGl0VXNlckluZm8obmFtZSwgYWJvdXQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWU6IG5hbWUsIGFib3V0OiBhYm91dCB9KVxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSlcbiAgfVxuXG4gIC8qINCY0LfQvNC10L3QtdC90LjQtSDQsNCy0LDRgtCw0YDQsCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8gKi9cblxuICBlZGl0VXNlckF2YXRhcihwaG90bykge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhcjogcGhvdG8gfSlcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19idXR0b24nKTtcbiAgICB0aGlzLl9idXR0b25TdWJtaXQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uJyk7XG4gICAgdGhpcy5fYnV0dG9uU3VibWl0VGV4dCA9IHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudDtcbiAgfVxuXG4gIC8qINCa0L3QvtC/0LrQsCDQv9GA0Lgg0LfQsNCz0YDRg9C30LrQtSAqL1xuXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy5fYnV0dG9uU3VibWl0LnRleHRDb250ZW50ID0gJ9Cj0LTQsNC70LXQvdC40LUuLi4nO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSB0aGlzLl9idXR0b25TdWJtaXRUZXh0O1xuICAgIH1cbiAgfVxuXG4gIC8qINCS0YvQt9C+0LIg0YTRg9C90LrRhtC40Lgg0YPQtNCw0LvQtdC90LjRjyAqL1xuXG4gIHNldFN1Ym1pdEhhbmRsZXIoZGVsZXRlQ2FyZCkge1xuICAgIHRoaXMuX2RlbGV0ZUNhcmRDbGljayA9IGRlbGV0ZUNhcmRcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2RlbGV0ZUNhcmRDbGljaygpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBDYXJkIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCB2YWxpZGF0aW9uQ29uZmlnLCBwZXJzb25hbERhdGEgfSBmcm9tICcuLi9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBidXR0b25PcGVuUG9wdXBDcmVhdGVDYXJkLFxuICBidXR0b25PcGVuUG9wdXBFZGl0UHJvZmlsZSxcbiAgZm9ybVBvcHVwRWRpdCwgZm9ybVBvcHVwQWRkLFxuICBwb3B1cEltYWdlLCBwb3B1cE5hbWVJbWFnZSxcbiAgaW5wdXROYW1lUHJvZmlsZSwgaW5wdXREZXNjcmlwdGlvblByb2ZpbGUsXG4gIGZvcm1Qb3B1cEF2YXRhciwgYnV0dG9uT3BlblBvcHVwQXZhdGFyLFxuICBpbnB1dEF2YXRhciB9IGZyb20gJy4uL3NjcmlwdHMvdXRpbHMvZWxlbWVudHMuanMnO1xuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5pbXBvcnQgQXBpIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMnO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uJztcblxuLyog0J/QvtC00LrQu9GO0YfQtdC90LjQtSDQstCw0LvQuNC00LDRhtC40LggKi9cblxuY29uc3QgdmFsaWRhdGlvbmZvcm1Qb3B1cEVkaXQgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtUG9wdXBFZGl0KTtcbnZhbGlkYXRpb25mb3JtUG9wdXBFZGl0LmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgdmFsaWRhdGlvbmZvcm1Qb3B1cEFkZCA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm1Qb3B1cEFkZCk7XG52YWxpZGF0aW9uZm9ybVBvcHVwQWRkLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgdmFsaWRhdGlvbmZvcm1Qb3B1cEF2YXRhciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm1Qb3B1cEF2YXRhcik7XG52YWxpZGF0aW9uZm9ybVBvcHVwQXZhdGFyLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLyog0J/QvtC00LrQu9GO0YfQtdC90LjQtSBBcGkgKi9cblxuY29uc3QgYXBpID0gbmV3IEFwaShwZXJzb25hbERhdGEpO1xuXG5sZXQgdXNlcklkO1xuXG4vKiDQlNCw0L3QvdGL0LUg0L/RgNC+0YTQuNC70Y8gKi9cblxuY29uc3QgdXNlciA9IG5ldyBVc2VySW5mbyh7XG4gIHNlbGVjdG9yTmFtZTogJy5wcm9maWxlX19uYW1lJyxcbiAgc2VsZWN0b3JEZXNjcmlwdGlvbjogJy5wcm9maWxlX19kZXNjcmlwdGlvbicsXG4gIHNlbGVjdG9yQXZhdGFyOiAnLnByb2ZpbGVfX2F2YXRhcidcbn0pO1xuXG4vKiDQlNC+0LHQsNCy0LvQtdC90LjQtSDQvNCw0YHRgdC40LLQsCDQutCw0YDRgtC+0YfQtdC6ICovXG5cbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oe1xuICByZW5kZXJlcjogKGl0ZW1zKSA9PiB7XG4gICAgY29uc3QgZWxlbWVudCA9IGNyZWF0ZUNhcmQoaXRlbXMpO1xuXG4gICAgY2FyZExpc3QuYWRkSXRlbShlbGVtZW50KTtcbiAgfVxuICB9LCAnLmNhcmRzJ1xuKTtcblxuLyog0KHQvtC30LTQsNC90LjQtSDQutCw0YDRgtC+0YfQtdC6ICovXG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YSwgJyNjYXJkcycsIHVzZXJJZCwgaGFuZGxlQ2FyZENsaWNrLFxuICB7IGRlbGV0ZUNhcmRDbGljazogKGNhcmRJZCkgPT4ge1xuICAgIHBvcHVwRGVsZXRlQ2FyZC5vcGVuUG9wdXAoKTtcbiAgICBwb3B1cERlbGV0ZUNhcmQuc2V0U3VibWl0SGFuZGxlcigoKSA9PiB7XG4gICAgICBwb3B1cERlbGV0ZUNhcmQucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgICAgIGFwaS5kZWxldGVDYXJkKGNhcmRJZClcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGNhcmQuZGVsZXRlQ2FyZCgpO1xuICAgICAgICAgIHBvcHVwRGVsZXRlQ2FyZC5jbG9zZVBvcHVwKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coYNCf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LA6ICR7ZXJyfWApO1xuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgcG9wdXBEZWxldGVDYXJkLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgICAgICB9KVxuICAgIH0pXG4gIH0sXG4gIGhhbmRsZUxpa2U6IChjYXJkSWQpID0+IHtcbiAgICBhcGkuYWRkTGlrZUNhcmQoY2FyZElkKVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBjYXJkLmxpa2VDYXJkKHJlcyk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYNCf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LA6ICR7ZXJyfWApO1xuICAgICAgfSk7XG4gIH0sXG4gIHJlbW92ZUxpa2U6IChjYXJkSWQpID0+IHtcbiAgICBhcGkuZGVsZXRlTGlrZUNhcmQoY2FyZElkKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgY2FyZC5saWtlQ2FyZChkYXRhKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhg0J/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsDogJHtlcnJ9YCk7XG4gICAgICB9KTtcbiAgfVxuICB9XG4pO1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG5cbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG4vKiDQl9Cw0LPRgNGD0LfQutCwINC40L3RhNC+0YDQvNCw0YbQuNC4INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtSDQuCDQutCw0YDRgtC+0YfQtdC6INGBINGB0LXRgNCy0LXRgNCwICovXG5cblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldENhcmRzKCldKVxuICAudGhlbigoW3VzZXJEYXRhLCBjYXJkc10pID0+IHtcbiAgICB1c2VyLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcbiAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XG4gICAgY2FyZExpc3QucmVuZGVySXRlbXMoY2FyZHMpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgfVxuKVxuXG4vKiDQntGC0LrRgNGL0YLQuNC1INC40LfQvtCx0YDQsNC20LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuCAqL1xuXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3R5cGVfdmlldycsIHBvcHVwSW1hZ2UsIHBvcHVwTmFtZUltYWdlKTtcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhuYW1lLCBsaW5rKSB7XG4gIHBvcHVwV2l0aEltYWdlLm9wZW5Qb3B1cChuYW1lLCBsaW5rKTtcbn1cblxuLyog0JjQt9C80LXQvdC10L3QuNC1INC00LDQvdC90YvRhSDQv9GA0L7RhNC40LvRjyAqL1xuXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2VkaXQnLFxuKGRhdGEpID0+IHtcbiAgcG9wdXBFZGl0UHJvZmlsZS5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBhcGkuZWRpdFVzZXJJbmZvKGRhdGEuaW5wdXROYW1lUHJvZmlsZSwgZGF0YS5pbnB1dERlc2NyaXB0aW9uUHJvZmlsZSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgdXNlci5zZXRVc2VySW5mbyhkYXRhKTtcbiAgICAgIHBvcHVwRWRpdFByb2ZpbGUuY2xvc2VQb3B1cCgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHBvcHVwRWRpdFByb2ZpbGUucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgfSlcbn0pXG5cbnBvcHVwRWRpdFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuYnV0dG9uT3BlblBvcHVwRWRpdFByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHZhbGlkYXRpb25mb3JtUG9wdXBFZGl0LnJlbW92ZVZhbGlkYXRpb24oKTtcbiAgY29uc3QgeyBuYW1lLCBhYm91dCB9ID0gdXNlci5nZXRVc2VySW5mbygpO1xuXG4gIGlucHV0TmFtZVByb2ZpbGUudmFsdWUgPSBuYW1lO1xuICBpbnB1dERlc2NyaXB0aW9uUHJvZmlsZS52YWx1ZSA9IGFib3V0O1xuXG4gIHBvcHVwRWRpdFByb2ZpbGUub3BlblBvcHVwKCk7XG59KVxuXG4vKiDQlNC+0LHQsNCy0LvQtdC90LjQtSDQvdC+0LLRi9GFINC60LDRgNGC0L7Rh9C10LogKi9cblxuY29uc3QgcG9wdXBDcmVhdGVDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2NyZWF0ZScsXG4oZGF0YSkgPT4ge1xuICBwb3B1cENyZWF0ZUNhcmQucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgYXBpLmNyZWF0ZUNhcmQoZGF0YS5uYW1lLCBkYXRhLmxpbmspXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGNhcmRMaXN0LmFkZEl0ZW1TdGFydChjcmVhdGVDYXJkKGRhdGEpKTtcbiAgICAgIHBvcHVwQ3JlYXRlQ2FyZC5jbG9zZVBvcHVwKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coYNCf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LA6ICR7ZXJyfWApO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBDcmVhdGVDYXJkLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgIH0pXG59KTtcblxucG9wdXBDcmVhdGVDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmJ1dHRvbk9wZW5Qb3B1cENyZWF0ZUNhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHZhbGlkYXRpb25mb3JtUG9wdXBBZGQucmVtb3ZlVmFsaWRhdGlvbigpO1xuICBwb3B1cENyZWF0ZUNhcmQub3BlblBvcHVwKCk7XG59KTtcblxuLyog0JjQt9C80LXQvdC10L3QuNC1INCw0LLQsNGC0LDRgNCwINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyAqL1xuXG5jb25zdCBwb3B1cEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9hdmF0YXInLFxuKGRhdGEpID0+IHtcbiAgcG9wdXBBdmF0YXIucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgYXBpLmVkaXRVc2VyQXZhdGFyKGRhdGEuaW5wdXRBdmF0YXIpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHVzZXIuc2V0VXNlckluZm8oZGF0YSk7XG4gICAgICBwb3B1cEF2YXRhci5jbG9zZVBvcHVwKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coYNCf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LA6ICR7ZXJyfWApO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBBdmF0YXIucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgfSlcbn0pO1xucG9wdXBBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuYnV0dG9uT3BlblBvcHVwQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICB2YWxpZGF0aW9uZm9ybVBvcHVwQXZhdGFyLnJlbW92ZVZhbGlkYXRpb24oKTtcbiAgcG9wdXBBdmF0YXIub3BlblBvcHVwKCk7XG59KVxuXG4vKiDQn9C+0LTRgtCy0LXRgNC20LTQtdC90LjQtSDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LggKi9cblxuY29uc3QgcG9wdXBEZWxldGVDYXJkID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbignLnBvcHVwX3R5cGVfZGVsZXRlJylcblxucG9wdXBEZWxldGVDYXJkLnNldEV2ZW50TGlzdGVuZXJzKClcblxuXG5cblxuXG4iXSwibmFtZXMiOlsiQ2FyZCIsImRhdGEiLCJ0ZW1wbGF0ZUlkIiwidXNlcklkIiwiaGFuZGxlQ2FyZENsaWNrIiwiX3JlZiIsImRlbGV0ZUNhcmRDbGljayIsImhhbmRsZUxpa2UiLCJyZW1vdmVMaWtlIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkSWQiLCJfaWQiLCJfbGlrZXMiLCJsaWtlcyIsIl9vd25lcklkIiwib3duZXIiLCJfdGVtcGxhdGVJZCIsIl91c2VySWQiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2RlbGV0ZUNhcmRDbGljayIsIl9oYW5kbGVMaWtlIiwiX3JlbW92ZUxpa2UiLCJrZXkiLCJ2YWx1ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfbGlrZUJ1dHRvbiIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInRvZ2dsZSIsIl9saWtlQ291bnRlciIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiX3RoaXMiLCJzb21lIiwidXNlciIsImFkZExpa2UiLCJfZWxlbWVudCIsIl9kZWxldGVCdXR0b24iLCJfdGhpczIiLCJfY2FyZEltYWdlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5zIiwiX2dldFRlbXBsYXRlIiwiX3RpdGxlQ2FyZCIsIl9saWtlc1VzZXIiLCJhbHQiLCJzcmMiLCJfcmVtb3ZlRGVsZXRlQnV0dG9uIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwicGFnZSIsImJ1dHRvbk9wZW5Qb3B1cENyZWF0ZUNhcmQiLCJidXR0b25PcGVuUG9wdXBFZGl0UHJvZmlsZSIsImJ1dHRvbk9wZW5Qb3B1cEF2YXRhciIsImZvcm1Qb3B1cEVkaXQiLCJmb3JtcyIsInBvcHVwRWRpdCIsImZvcm1Qb3B1cEFkZCIsInBvcHVwQWRkIiwiZm9ybVBvcHVwQXZhdGFyIiwicG9wdXBBdmF0YXIiLCJwb3B1cFZpZXciLCJwb3B1cEltYWdlIiwicG9wdXBOYW1lSW1hZ2UiLCJpbnB1dE5hbWVQcm9maWxlIiwiaW5wdXREZXNjcmlwdGlvblByb2ZpbGUiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybSIsIl9mb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm0iLCJfaW5wdXRzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwiaW5wdXQiLCJlcnJvckVsZW1lbnQiLCJjb25jYXQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIlNlY3Rpb24iLCJjb250YWluZXJJZCIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJhcHBlbmQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImV2dCIsImNsb3NlUG9wdXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJjYWxsIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBOYW1lSW1hZ2UiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiUG9wdXBXaXRoRm9ybSIsImZvcm1TdWJtaXQiLCJfZm9ybVN1Ym1pdCIsIl9idXR0b25TdWJtaXQiLCJfYnV0dG9uU3VibWl0VGV4dCIsImlucHV0VmFsdWVzTGlzdCIsImlzTG9hZGluZyIsImluZm8iLCJyZXNldCIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwiVXNlckluZm8iLCJzZWxlY3Rvck5hbWUiLCJzZWxlY3RvckRlc2NyaXB0aW9uIiwic2VsZWN0b3JBdmF0YXIiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZURlc2NyaXB0aW9uIiwiX3Byb2ZpbGVBdmF0YXIiLCJhYm91dCIsImF2YXRhciIsIkFwaSIsIl91cmwiLCJ1cmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJ0aGVuIiwiX2hhbmRsZVJlc3BvbnNlIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJwaG90byIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsIl9idXR0b24iLCJkZWxldGVDYXJkIiwidmFsaWRhdGlvbmZvcm1Qb3B1cEVkaXQiLCJlbmFibGVWYWxpZGF0aW9uIiwidmFsaWRhdGlvbmZvcm1Qb3B1cEFkZCIsInZhbGlkYXRpb25mb3JtUG9wdXBBdmF0YXIiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiY2FyZExpc3QiLCJpdGVtcyIsImNyZWF0ZUNhcmQiLCJhZGRJdGVtIiwiY2FyZCIsInBvcHVwRGVsZXRlQ2FyZCIsIm9wZW5Qb3B1cCIsInNldFN1Ym1pdEhhbmRsZXIiLCJyZW5kZXJMb2FkaW5nIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZmluYWxseSIsImFkZExpa2VDYXJkIiwibGlrZUNhcmQiLCJkZWxldGVMaWtlQ2FyZCIsImdlbmVyYXRlQ2FyZCIsImFsbCIsImdldFVzZXJJbmZvIiwiZ2V0Q2FyZHMiLCJfcmVmMiIsInVzZXJEYXRhIiwiY2FyZHMiLCJzZXRVc2VySW5mbyIsInJlbmRlckl0ZW1zIiwicG9wdXBXaXRoSW1hZ2UiLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwRWRpdFByb2ZpbGUiLCJlZGl0VXNlckluZm8iLCJyZW1vdmVWYWxpZGF0aW9uIiwiX3VzZXIkZ2V0VXNlckluZm8iLCJwb3B1cENyZWF0ZUNhcmQiLCJhZGRJdGVtU3RhcnQiLCJlZGl0VXNlckF2YXRhciIsImlucHV0QXZhdGFyIl0sInNvdXJjZVJvb3QiOiIifQ==