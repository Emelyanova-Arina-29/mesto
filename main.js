(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e,n,r,o,i){var u=i.deleteCardClick,a=i.likeCardClick,c=i.likeCardRemove;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._cardId=e._id,this._likes=e.likes,this._ownerId=e.owner._id,this._templateId=n,this._userId=r,this._handleCardClick=o,this._deleteCardClick=u,this._likeCardClick=a,this._likeCardRemove=c}var n,r;return n=t,r=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateId).content.querySelector(".card").cloneNode(!0)}},{key:"addLike",value:function(){this._likeButton.classList.add("card__like_active")}},{key:"removeLike",value:function(){this._likeButton.classList.remove("card__like_active")}},{key:"likeCard",value:function(t){this._likeButton.classList.toggle("card__like_active"),this._likes=t.likes,this._likeCounter.textContent=this._likes.length}},{key:"_likesUser",value:function(){var t=this;this._likes.some((function(e){return t._userId===e._id}))&&this.addLike()}},{key:"deleteCard",value:function(){this._element.remove(),this._element=null}},{key:"_removeDeleteButton",value:function(){this._userId!==this._ownerId&&this._deleteButton.remove()}},{key:"_setEventListeners",value:function(){var t=this;this._cardImage.addEventListener("click",(function(){t._handleCardClick(t._name,t._link)})),this._likeButton.addEventListener("click",(function(){t._likeButton.classList.contains("card__like_active")?t._likeCardRemove(t._cardId):t._likeCardClick(t._cardId)})),this._deleteButton.addEventListener("click",(function(){t._deleteCardClick(t._cardId)}))}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".card__like"),this._titleCard=this._element.querySelector(".card__title"),this._cardImage=this._element.querySelector(".card__image"),this._deleteButton=this._element.querySelector(".card__delete"),this._likeCounter=this._element.querySelector(".card__number-like"),this._likesUser(),this._cardImage.alt=this._name,this._titleCard.textContent=this._name,this._cardImage.src=this._link,this._removeDeleteButton(),this._likeCounter.textContent=this._likes.length,this._setEventListeners(),this._element}},{key:"getNameImage",value:function(){return this._name}},{key:"getLinkImage",value:function(){return this._link}}],r&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(),r={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"},o=document.querySelector(".page"),i=o.querySelector(".profile__add"),u=o.querySelector(".profile__edit"),a=o.querySelector(".profile__edit-avatar"),c=document.forms.popupEdit,l=document.forms.popupAdd,s=document.forms.popupAvatar,f=o.querySelector(".popup_type_view"),p=f.querySelector(".popup__image"),y=f.querySelector(".popup__caption"),d=c.querySelector(".popup__input_type_name"),h=c.querySelector(".popup__input_type_description"),v=s.querySelector(".popup__input_type_avatar");function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===_(o)?o:String(o)),r)}var o}var b=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=n,this._inputs=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector)}var e,n;return e=t,(n=[{key:"_hideInputError",value:function(t){var e=this._form.querySelector(".".concat(t.id,"-error"));e.classList.remove(this._errorClass),e.textContent="",t.classList.remove(this._inputErrorClass)}},{key:"_showInputError",value:function(t){var e=this._form.querySelector(".".concat(t.id,"-error"));e.classList.add(this._errorClass),e.textContent=t.validationMessage,t.classList.add(this._inputErrorClass)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_hasInvalidInput",value:function(){return this._inputs.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"buttonStateOff",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"_setEventListeners",value:function(){var t=this;this._toggleButtonState(),this._inputs.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"removeValidation",value:function(){var t=this;this._toggleButtonState(),this._inputs.forEach((function(e){t._hideInputError(e)}))}}])&&m(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==S(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===S(o)?o:String(o)),r)}var o}var k=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"addItem",value:function(t){this._container.append(t)}},{key:"addItemStart",value:function(t){this._container.prepend(t)}},{key:"renderItems",value:function(t){var e=this;t.forEach((function(t){e._renderer(t)}))}}])&&g(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}var E=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.closePopup()}},{key:"openPopup",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"closePopup",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){e.target.classList.contains("popup_opened")&&t.closePopup(),e.target.classList.contains("popup__close")&&t.closePopup()}))}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==P(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===P(o)?o:String(o)),r)}var o}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=I(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},j.apply(this,arguments)}function L(t,e){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},L(t,e)}function I(t){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},I(t)}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=I(r);if(o){var n=I(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,t))._popupImage=e,r._popupNameImage=n,r}return e=u,(n=[{key:"openPopup",value:function(t,e){this._popupImage.alt=t,this._popupNameImage.textContent=t,this._popupImage.src=e,j(I(u.prototype),"openPopup",this).call(this)}}])&&O(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(E);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==T(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===T(o)?o:String(o)),r)}var o}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=A(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},q.apply(this,arguments)}function x(t,e){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x(t,e)}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}var D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=A(r);if(o){var n=A(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._formSubmit=e,n._form=n._popup.querySelector(".popup__form"),n._inputs=n._form.querySelectorAll(".popup__input"),n._buttonSubmit=n._form.querySelector(".popup__button"),n._buttonSubmitText=n._buttonSubmit.textContent,n}return e=u,(n=[{key:"_getInputValues",value:function(){var t={};return this._inputs.forEach((function(e){t[e.name]=e.value})),t}},{key:"setInputValues",value:function(t){this._inputs.forEach((function(e){e.value=t[e.name]}))}},{key:"buttonStateLoading",value:function(t){this._buttonSubmit.textContent=t?"Сохранение...":this._buttonSubmitText}},{key:"setEventListeners",value:function(){var t=this;q(A(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._formSubmit(t._getInputValues()),t._form.reset(),t.closePopup()}))}}])&&B(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(E);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==U(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===U(o)?o:String(o)),r)}var o}var V=function(){function t(e){var n=e.selectorName,r=e.selectorDescription,o=e.selectorAvatar;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._profileName=document.querySelector(n),this._profileDescription=document.querySelector(r),this._profileAvatar=document.querySelector(o)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,about:this._profileDescription.textContent,avatar:this._profileAvatar.src}}},{key:"setUserInfo",value:function(t){this._profileName.textContent=t.name,this._profileDescription.textContent=t.about,this._profileAvatar.src=t.avatar}},{key:"setUserAvatar",value:function(t){this._profileAvatar.src=t.avatar}}])&&N(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==J(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===J(o)?o:String(o)),r)}var o}var M=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e.url,this._headers=e.headers}var e,n;return e=t,(n=[{key:"_handleResponse",value:function(t){return t.ok?t.json():Promise.reject("Произошла ошибка: ".concat(t.status))}},{key:"getCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then(this._handleResponse)}},{key:"createCard",value:function(t,e){return fetch("".concat(this._url,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({name:t,link:e})}).then(this._handleResponse)}},{key:"deleteCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t),{headers:this._headers,method:"DELETE"}).then(this._handleResponse)}},{key:"addLikeCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{headers:this._headers,method:"PUT"}).then(this._handleResponse)}},{key:"deleteLikeCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{headers:this._headers,method:"DELETE"}).then(this._handleResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then(this._handleResponse)}},{key:"editUserInfo",value:function(t,e){return fetch("".concat(this._url,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:t,about:e})}).then(this._handleResponse)}},{key:"editUserAvatar",value:function(t){return fetch("".concat(this._url,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:t})}).then(this._handleResponse)}}])&&H(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function $(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==z(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===z(o)?o:String(o)),r)}var o}function F(){return F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=K(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},F.apply(this,arguments)}function G(t,e){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},G(t,e)}function K(t){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},K(t)}var Q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=K(r);if(o){var n=K(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._form=e._popup.querySelector(".popup__form"),e._button=e._form.querySelectorAll(".popup__button"),e._buttonSubmit=e._form.querySelector(".popup__button"),e._buttonSubmitText=e._buttonSubmit.textContent,e}return e=u,(n=[{key:"buttonStateLoadingDelete",value:function(t){this._buttonSubmit.textContent=t?"Удаление...":this._buttonSubmitText}},{key:"submitButton",value:function(t){this._deleteCardClick=t}},{key:"setEventListeners",value:function(){var t=this;F(K(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._deleteCardClick(),t.closePopup()}))}}])&&$(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(E);function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var X=new b(r,c);X.enableValidation();var Y=new b(r,l);Y.enableValidation();var Z=new b(r,s);Z.enableValidation();var tt,et=new M({url:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{authorization:"f1580dcf-100f-4c1e-a333-5ef7b032595f","Content-Type":"application/json"}}),nt=new V({selectorName:".profile__name",selectorDescription:".profile__description",selectorAvatar:".profile__avatar"}),rt=new k({renderer:function(t){var e=ot(t);rt.addItem(e)}},".cards");function ot(t){var e=new n(t,"#cards",tt,ut,{deleteCardClick:function(t){st.openPopup(),st.submitButton((function(){st.buttonStateLoadingDelete(!0),et.deleteCard(t).then((function(){e.deleteCard(),st.closePopup()})).catch((function(t){console.log("Произошла ошибка: ".concat(t))})).finally((function(){st.buttonStateLoadingDelete(!1)}))}))},likeCardClick:function(t){et.addLikeCard(t).then((function(t){e.likeCard(t)})).catch((function(t){console.log("Произошла ошибка: ".concat(t))}))},likeCardRemove:function(t){et.deleteLikeCard(t).then((function(t){e.likeCard(t)})).catch((function(t){console.log("Произошла ошибка: ".concat(t))}))}});return e.generateCard()}Promise.all([et.getUserInfo(),et.getCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];nt.setUserInfo(o),tt=o._id,rt.renderItems(i)})).catch((function(t){console.log("Произошла ошибка: ".concat(t))}));var it=new R(".popup_type_view",p,y);function ut(t,e){it.openPopup(t,e)}it.setEventListeners();var at=new D(".popup_type_edit",(function(t){at.buttonStateLoading(!0),et.editUserInfo(t.inputNameProfile,t.inputDescriptionProfile).then((function(t){nt.setUserInfo(t),at.closePopup()})).catch((function(t){console.log("Произошла ошибка: ".concat(t))})).finally((function(){at.buttonStateLoading(!1)}))}));at.setEventListeners(),u.addEventListener("click",(function(){X.removeValidation();var t=nt.getUserInfo(),e=t.name,n=t.about;d.value=e,h.value=n,at.openPopup(),X.buttonStateOff()}));var ct=new D(".popup_type_create",(function(t){ct.buttonStateLoading(!0),et.createCard(t.name,t.link).then((function(t){rt.addItemStart(ot(t)),ct.closePopup()})).catch((function(t){console.log("Произошла ошибка: ".concat(t))})).finally((function(){ct.buttonStateLoading(!1)}))}));ct.setEventListeners(),i.addEventListener("click",(function(){Y.removeValidation(),ct.openPopup(),Y.buttonStateOff()}));var lt=new D(".popup_type_avatar",(function(t){lt.buttonStateLoading(!0),et.editUserAvatar(t.inputAvatar).then((function(t){nt.setUserInfo(t),lt.closePopup()})).catch((function(t){console.log("Произошла ошибка: ".concat(t))})).finally((function(){lt.buttonStateLoading(!1)}))}));lt.setEventListeners(),a.addEventListener("click",(function(){Z.removeValidation();var t=nt.getUserInfo().avatar;v.value=t,lt.openPopup(),Z.buttonStateOff()}));var st=new Q(".popup_type_delete");st.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNsQixJQUNDdUUsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJLHFCQUFEcEcsT0FBc0JrRyxHQUNuQyxJQUNDRyxTQUFRLFdBQ1BxQixHQUFnQkwsb0JBQW1CLEVBQ3JDLEdBQ0osSUFFQUssR0FBZ0JQLG9CQUVoQnBKLEVBQTBCakIsaUJBQWlCLFNBQVMsV0FDbERzSSxFQUF1Qm1DLG1CQUN2QkcsR0FBZ0I1QixZQUNoQlYsRUFBdUJxQyxnQkFDekIsSUFJQSxJQUFNakosR0FBYyxJQUFJK0QsRUFBYyxzQkFDdEMsU0FBQ3pJLEdBQ0MwRSxHQUFZNkksb0JBQW1CLEdBQy9CL0IsR0FBSXNDLGVBQWU5TixFQUFLZ0YsYUFDckJ5RixNQUFLLFNBQUN6SyxHQUNMMEMsR0FBS3dLLFlBQVlsTixHQUNqQjBFLEdBQVlrRCxZQUNkLElBQ0N1RSxPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUkscUJBQURwRyxPQUFzQmtHLEdBQ25DLElBQ0NHLFNBQVEsV0FDUDdILEdBQVk2SSxvQkFBbUIsRUFDakMsR0FDSixJQUNBN0ksR0FBWTJJLG9CQUVabEosRUFBc0JuQixpQkFBaUIsU0FBUyxXQUM5Q3VJLEVBQTBCa0MsbUJBQzFCLElBQVE3RCxFQUFXbEgsR0FBS21LLGNBQWhCakQsT0FFUjVFLEVBQVlyRCxNQUFRaUksRUFFcEJsRixHQUFZc0gsWUFDWlQsRUFBMEJvQyxnQkFDNUIsSUFJQSxJQUFNNUIsR0FBa0IsSUFBSWQsRUFBZ0Isc0JBRTVDYyxHQUFnQnNCLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy91dGlscy9lbGVtZW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGUuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCB0ZW1wbGF0ZUlkLCB1c2VySWQsIGhhbmRsZUNhcmRDbGljaywgeyBkZWxldGVDYXJkQ2xpY2ssIGxpa2VDYXJkQ2xpY2ssIGxpa2VDYXJkUmVtb3ZlIH0pIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZElkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcbiAgICB0aGlzLl90ZW1wbGF0ZUlkID0gdGVtcGxhdGVJZDtcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2RlbGV0ZUNhcmRDbGljayA9IGRlbGV0ZUNhcmRDbGljaztcbiAgICB0aGlzLl9saWtlQ2FyZENsaWNrID0gbGlrZUNhcmRDbGljaztcbiAgICB0aGlzLl9saWtlQ2FyZFJlbW92ZSA9IGxpa2VDYXJkUmVtb3ZlO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlSWQpLlxuICAgIGNvbnRlbnQucXVlcnlTZWxlY3RvcignLmNhcmQnKS5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZDtcbiAgfVxuXG4gIC8qINCf0L7RgdGC0LDQstC40YLRjCDQu9Cw0LnQuiAqL1xuXG4gIGFkZExpa2UoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXJkX19saWtlX2FjdGl2ZScpO1xuICB9O1xuXG4gIC8qINCj0LHRgNCw0YLRjCDQu9Cw0LnQuiAqL1xuXG4gIHJlbW92ZUxpa2UoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkX19saWtlX2FjdGl2ZScpO1xuICB9O1xuXG4gIC8qINCb0LDQudC60L3Rg9GC0Ywg0LrQsNGA0YLQvtGH0LrRgyAqL1xuXG4gIGxpa2VDYXJkKGRhdGEpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2xpa2VfYWN0aXZlJyk7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuICAgIHRoaXMuX2xpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICB9O1xuXG4gIC8qINCb0LDQudC60L3Rg9C7INC70Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINC60LDRgNGC0L7Rh9C60YM/ICovXG5cbiAgX2xpa2VzVXNlcigpIHtcbiAgICBpZiAodGhpcy5fbGlrZXMuc29tZSgodXNlcikgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX3VzZXJJZCA9PT0gdXNlci5faWQ7XG4gICAgfSkpIHtcbiAgICAgIHRoaXMuYWRkTGlrZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qINCj0LTQsNC70LjRgtGMINC60LDRgNGC0L7Rh9C60YMgKi9cblxuICBkZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gIH1cblxuICAvKiDQo9Cx0LjRgNCw0LXQvCDQutC90L7Qv9C60YMg0YPQtNCw0LvQtdC90LjRjyDRgyDRh9GD0LbQuNGFINC60LDRgNGC0L7Rh9C10LogKi9cblxuICBfcmVtb3ZlRGVsZXRlQnV0dG9uKCkge1xuICAgIGlmICh0aGlzLl91c2VySWQgIT09IHRoaXMuX293bmVySWQpIHtcbiAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICAvKiDQndCw0LLQtdGI0LjQstCw0LXQvCDQvtCx0YDQsNCx0L7RgtGH0LjQutC4ICovXG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgICB9KTtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdjYXJkX19saWtlX2FjdGl2ZScpKSB7XG4gICAgICAgIHRoaXMuX2xpa2VDYXJkUmVtb3ZlKHRoaXMuX2NhcmRJZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9saWtlQ2FyZENsaWNrKHRoaXMuX2NhcmRJZCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5fZGVsZXRlQ2FyZENsaWNrKHRoaXMuX2NhcmRJZCk7XG4gICAgfSk7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UnKTtcbiAgICB0aGlzLl90aXRsZUNhcmQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpO1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJyk7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fZGVsZXRlJyk7XG4gICAgdGhpcy5fbGlrZUNvdW50ZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19udW1iZXItbGlrZScpO1xuXG5cbiAgICB0aGlzLl9saWtlc1VzZXIoKTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX3RpdGxlQ2FyZC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fcmVtb3ZlRGVsZXRlQnV0dG9uKCk7XG4gICAgdGhpcy5fbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgZ2V0TmFtZUltYWdlKCkge1xuICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICB9XG5cbiAgZ2V0TGlua0ltYWdlKCkge1xuICAgIHJldHVybiB0aGlzLl9saW5rO1xuICB9XG59XG4iLCIvKiDQnNCw0YHRgdC40LIg0LrQsNGA0YLQvtGH0LXQuiAqL1xuXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogJ9CQ0YDRhdGL0LcnLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JjQstCw0L3QvtCy0L4nLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JrQsNC80YfQsNGC0LrQsCcsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JHQsNC50LrQsNC7JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnXG4gIH1cbl07XG5cbi8qINCe0LHRitC10LrRgiwg0YHQvtGB0YLQvtGP0YnQuNC5INC40Lcg0YHQstC+0LnRgdGC0LIsINC30L3QsNGH0LXQvdC40Y/QvNC4INC60L7RgtC+0YDRi9GFINGP0LLQu9GP0Y7RgtGB0Y8g0LrQu9Cw0YHRgdGLLCDQvdC10L7QsdGF0L7QtNC40LzRi9C1INC00LvRjyDRg9C90LjQstC10YDRgdCw0LvRjNC90L7Qs9C+INC90LDQv9C40YHQsNC90LjRjyDQutC+0LTQsCDQstCw0LvQuNC00LDRhtC40LggKi9cblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX2J1dHRvbicsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uX2Rpc2FibGVkJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxuICBlcnJvckNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yX3Zpc2libGUnXG59O1xuXG5leHBvcnQgY29uc3QgcGVyc29uYWxEYXRhID0ge1xuICB1cmw6J2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjAnLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogJ2YxNTgwZGNmLTEwMGYtNGMxZS1hMzMzLTVlZjdiMDMyNTk1ZicsXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICB9XG59XG4iLCJjb25zdCBwYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhZ2UnKTtcblxuY29uc3QgYnV0dG9uT3BlblBvcHVwQ3JlYXRlQ2FyZCA9IHBhZ2UucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZCcpO1xuY29uc3QgYnV0dG9uT3BlblBvcHVwRWRpdFByb2ZpbGUgPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0Jyk7XG5jb25zdCBidXR0b25PcGVuUG9wdXBBdmF0YXIgPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWF2YXRhcicpO1xuXG5jb25zdCBmb3JtUG9wdXBFZGl0ID0gZG9jdW1lbnQuZm9ybXMucG9wdXBFZGl0O1xuY29uc3QgZm9ybVBvcHVwQWRkID0gZG9jdW1lbnQuZm9ybXMucG9wdXBBZGQ7XG5jb25zdCBmb3JtUG9wdXBBdmF0YXIgPSBkb2N1bWVudC5mb3Jtcy5wb3B1cEF2YXRhcjtcblxuY29uc3QgcG9wdXBWaWV3ID0gcGFnZS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV92aWV3Jyk7XG5jb25zdCBwb3B1cEltYWdlID0gcG9wdXBWaWV3LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcbmNvbnN0IHBvcHVwTmFtZUltYWdlID0gcG9wdXBWaWV3LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2FwdGlvbicpO1xuY29uc3QgaW5wdXROYW1lUHJvZmlsZSA9IGZvcm1Qb3B1cEVkaXQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX25hbWUnKTtcbmNvbnN0IGlucHV0RGVzY3JpcHRpb25Qcm9maWxlID0gZm9ybVBvcHVwRWRpdC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfZGVzY3JpcHRpb24nKTtcbmNvbnN0IGlucHV0QXZhdGFyID0gZm9ybVBvcHVwQXZhdGFyLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9hdmF0YXInKTtcblxuXG5leHBvcnQgeyBidXR0b25PcGVuUG9wdXBDcmVhdGVDYXJkLFxuICBidXR0b25PcGVuUG9wdXBFZGl0UHJvZmlsZSxcbiAgZm9ybVBvcHVwRWRpdCwgZm9ybVBvcHVwQWRkLFxuICBwb3B1cEltYWdlLCBwb3B1cE5hbWVJbWFnZSxcbiAgaW5wdXROYW1lUHJvZmlsZSwgaW5wdXREZXNjcmlwdGlvblByb2ZpbGUsXG4gIGZvcm1Qb3B1cEF2YXRhciwgYnV0dG9uT3BlblBvcHVwQXZhdGFyLFxuICBpbnB1dEF2YXRhciB9XG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gY29uZmlnLmZvcm1TZWxlY3RvcjtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xuICAgIHRoaXMuX2lucHV0cyA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIC8qINCh0LrRgNGL0YLQuNC1INC+0YjQuNCx0LrQuCAqL1xuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWVycm9yYCk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICB9XG5cbiAgLyog0J/QvtC60LDQtyDQvtGI0LjQsdC60LggKi9cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8qINCf0YDQvtCy0LXRgNC60LAg0LLQsNC70LjQtNC90L7RgdGC0Lgg0L/QvtC70LXQuSDQstCy0L7QtNCwICovXG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xuICAgIH1cbiAgfVxuXG4gIC8qINCj0LfQvdCw0LXQvCwg0LXRgdGC0Ywg0LvQuCDQvdC10LLQsNC70LjQtNC90YvQuSDQuNC90L/Rg9GCICovXG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRzLnNvbWUoKGlucHV0KSA9PlxuICAgICAgIWlucHV0LnZhbGlkaXR5LnZhbGlkKVxuICB9XG5cbiAgLyog0J/QtdGA0LXQutC70Y7Rh9C10L3QuNC1INGB0L7RgdGC0L7Rj9C90LjRjyDQutC90L7Qv9C60LggKi9cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gLyog0JHQu9C+0LrQuNGA0L7QstC60LAg0LrQvdC+0L/QutC4ICovXG5cbiAgYnV0dG9uU3RhdGVPZmYoKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgLyog0KPRgdGC0LDQvdC+0LLQutCwINGB0LvRg9GI0LDRgtC10LvQtdC5ICovXG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIC8qINCd0LXQv9C+0YHRgNC10LTRgdGC0LLQtdC90L3QvtC1INC/0L7QtNC60LvRjtGH0LXQvdC40LUg0L/RgNC+0LLQtdGA0LrQuCDQv9C+0LvQtdC5ICovXG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgLyog0KPQtNCw0LvQtdC90LjQtSDRgdC+0L7QsdGJ0LXQvdC40Y8g0LLQsNC70LjQtNCw0YbQuNC4ICovXG5cbiAgcmVtb3ZlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xuICAgIH0pXG4gIH1cbn1cblxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lcklkKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lcklkKTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gIH1cblxuICBhZGRJdGVtU3RhcnQoZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoZGF0YSkge1xuICAgIGRhdGEuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoZWxlbWVudCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcylcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xuICAgIH1cbiAgfVxuXG4gIG9wZW5Qb3B1cCgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuXG4gIH1cblxuICBjbG9zZVBvcHVwKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG5cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykpIHtcbiAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XG4gICAgICB9XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZScpKSB7XG4gICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHBvcHVwSW1hZ2UsIHBvcHVwTmFtZUltYWdlKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHBvcHVwSW1hZ2U7XG4gICAgdGhpcy5fcG9wdXBOYW1lSW1hZ2UgPSBwb3B1cE5hbWVJbWFnZTtcbiAgfVxuXG4gIG9wZW5Qb3B1cChuYW1lLCBsaW5rKSB7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX3BvcHVwTmFtZUltYWdlLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XG5cbiAgICBzdXBlci5vcGVuUG9wdXAoKTtcbiAgfVxuXG5cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgZm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Zvcm1TdWJtaXQgPSBmb3JtU3VibWl0O1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbiAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcbiAgICB0aGlzLl9idXR0b25TdWJtaXQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uJyk7XG4gICAgdGhpcy5fYnV0dG9uU3VibWl0VGV4dCA9IHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dFZhbHVlc0xpc3QgPSB7fTtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCggKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc0xpc3RbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiBpbnB1dFZhbHVlc0xpc3Q7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhpbmZvKSB7XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGluZm9baW5wdXQubmFtZV1cbiAgICB9KVxuICB9XG5cbiAgLyog0JrQvdC+0L/QutCwINCy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4ICovXG5cbiAgYnV0dG9uU3RhdGVMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9IHRoaXMuX2J1dHRvblN1Ym1pdFRleHQ7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fZm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHtzZWxlY3Rvck5hbWUsIHNlbGVjdG9yRGVzY3JpcHRpb24sIHNlbGVjdG9yQXZhdGFyfSkge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvck5hbWUpO1xuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JEZXNjcmlwdGlvbik7XG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JBdmF0YXIpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGFib3V0OiB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQsXG4gICAgICBhdmF0YXI6IHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjXG4gICAgfVxuXG4gICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhci5zcmMgPSBkYXRhLmF2YXRhclxuICB9XG5cbiAgc2V0VXNlckF2YXRhcihkYXRhKSB7XG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhci5zcmMgPSBkYXRhLmF2YXRhclxuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgdGhpcy5fdXJsID0gZGF0YS51cmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGRhdGEuaGVhZGVycztcbiAgfVxuXG4gIC8qINCe0LHRgNCw0LHQvtGC0LrQsCDQvtGC0LLQtdGC0LAg0YHQtdGA0LLQtdGA0LAgKi9cblxuICBfaGFuZGxlUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qINCX0LDQs9GA0YPQt9C60LAg0LrQsNGA0YLQvtGH0LXQuiDRgSDRgdC10YDQstC10YDQsCAqL1xuXG4gIGdldENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSlcbiAgfVxuXG4gIC8qINCU0L7QsdCw0LLQu9C10L3QuNC1INC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuCAqL1xuXG4gIGNyZWF0ZUNhcmQobmFtZSwgbGluaykge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lOiBuYW1lLCBsaW5rOiBsaW5rIH0pXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICB9XG5cbiAgLyog0KPQtNCw0LvQtdC90LjQtSDQutCw0YDRgtC+0YfQutC4ICovXG5cbiAgZGVsZXRlQ2FyZChpZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7aWR9YCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICB9XG5cbiAgLyog0JTQvtCx0LDQstC70LXQvdC40LUg0LvQsNC50LrQsCDQutCw0YDRgtC+0YfQutC1ICovXG5cbiAgYWRkTGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICB9XG5cbiAgLyog0KPQsdGA0LDRgtGMINC70LDQudC6INGBINC60LDRgNGC0L7Rh9C60LggKi9cblxuICBkZWxldGVMaWtlQ2FyZChpZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICB9XG5cbiAgLyog0JfQsNCz0YDRg9C30LrQsCDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUgKi9cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gIH1cblxuICAvKiDQoNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNC1INC/0YDQvtGE0LjQu9GPICovXG5cbiAgZWRpdFVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lOiBuYW1lLCBhYm91dDogYWJvdXQgfSlcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gIH1cblxuICAvKiDQmNC30LzQtdC90LXQvdC40LUg0LDQstCw0YLQsNGA0LAg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPICovXG5cbiAgZWRpdFVzZXJBdmF0YXIocGhvdG8pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXI6IHBob3RvIH0pXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aERlbGV0ZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9fYnV0dG9uJyk7XG4gICAgdGhpcy5fYnV0dG9uU3VibWl0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpO1xuICAgIHRoaXMuX2J1dHRvblN1Ym1pdFRleHQgPSB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQ7XG4gIH1cblxuICAvKiDQmtC90L7Qv9C60LAg0L/RgNC4INC30LDQs9GA0YPQt9C60LUgKi9cblxuICBidXR0b25TdGF0ZUxvYWRpbmdEZWxldGUoaXNMb2FkaW5nKSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy5fYnV0dG9uU3VibWl0LnRleHRDb250ZW50ID0gJ9Cj0LTQsNC70LXQvdC40LUuLi4nO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSB0aGlzLl9idXR0b25TdWJtaXRUZXh0O1xuICAgIH1cbiAgfVxuXG4gIC8qINCS0YvQt9C+0LIg0YTRg9C90LrRhtC40Lgg0YPQtNCw0LvQtdC90LjRjyAqL1xuXG4gIHN1Ym1pdEJ1dHRvbihkZWxldGVDYXJkKSB7XG4gICAgdGhpcy5fZGVsZXRlQ2FyZENsaWNrID0gZGVsZXRlQ2FyZFxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fZGVsZXRlQ2FyZENsaWNrKCk7XG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ2FyZCB9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgdmFsaWRhdGlvbkNvbmZpZywgcGVyc29uYWxEYXRhIH0gZnJvbSAnLi4vc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgYnV0dG9uT3BlblBvcHVwQ3JlYXRlQ2FyZCxcbiAgYnV0dG9uT3BlblBvcHVwRWRpdFByb2ZpbGUsXG4gIGZvcm1Qb3B1cEVkaXQsIGZvcm1Qb3B1cEFkZCxcbiAgcG9wdXBJbWFnZSwgcG9wdXBOYW1lSW1hZ2UsXG4gIGlucHV0TmFtZVByb2ZpbGUsIGlucHV0RGVzY3JpcHRpb25Qcm9maWxlLFxuICBmb3JtUG9wdXBBdmF0YXIsIGJ1dHRvbk9wZW5Qb3B1cEF2YXRhcixcbiAgaW5wdXRBdmF0YXIgfSBmcm9tICcuLi9zY3JpcHRzL3V0aWxzL2VsZW1lbnRzLmpzJztcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCAnLi9pbmRleC5jc3MnO1xuaW1wb3J0IEFwaSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzJztcbmltcG9ydCBQb3B1cFdpdGhEZWxldGUgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aERlbGV0ZS5qcyc7XG5cbi8qINCf0L7QtNC60LvRjtGH0LXQvdC40LUg0LLQsNC70LjQtNCw0YbQuNC4ICovXG5cbmNvbnN0IHZhbGlkYXRpb25mb3JtUG9wdXBFZGl0ID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybVBvcHVwRWRpdCk7XG52YWxpZGF0aW9uZm9ybVBvcHVwRWRpdC5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHZhbGlkYXRpb25mb3JtUG9wdXBBZGQgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtUG9wdXBBZGQpO1xudmFsaWRhdGlvbmZvcm1Qb3B1cEFkZC5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHZhbGlkYXRpb25mb3JtUG9wdXBBdmF0YXIgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtUG9wdXBBdmF0YXIpO1xudmFsaWRhdGlvbmZvcm1Qb3B1cEF2YXRhci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbi8qINCf0L7QtNC60LvRjtGH0LXQvdC40LUgQXBpICovXG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkocGVyc29uYWxEYXRhKTtcblxubGV0IHVzZXJJZDtcblxuLyog0JTQsNC90L3Ri9C1INC/0YDQvtGE0LjQu9GPICovXG5cbmNvbnN0IHVzZXIgPSBuZXcgVXNlckluZm8oe1xuICBzZWxlY3Rvck5hbWU6ICcucHJvZmlsZV9fbmFtZScsXG4gIHNlbGVjdG9yRGVzY3JpcHRpb246ICcucHJvZmlsZV9fZGVzY3JpcHRpb24nLFxuICBzZWxlY3RvckF2YXRhcjogJy5wcm9maWxlX19hdmF0YXInXG59KTtcblxuLyog0JTQvtCx0LDQstC70LXQvdC40LUg0LzQsNGB0YHQuNCy0LAg0LrQsNGA0YLQvtGH0LXQuiAqL1xuXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcbiAgcmVuZGVyZXI6IChpdGVtcykgPT4ge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBjcmVhdGVDYXJkKGl0ZW1zKTtcblxuICAgIGNhcmRMaXN0LmFkZEl0ZW0oZWxlbWVudCk7XG4gIH1cbiAgfSwgJy5jYXJkcydcbik7XG5cbi8qINCh0L7Qt9C00LDQvdC40LUg0LrQsNGA0YLQvtGH0LXQuiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGEsICcjY2FyZHMnLCB1c2VySWQsIGhhbmRsZUNhcmRDbGljayxcbiAgeyBkZWxldGVDYXJkQ2xpY2s6IChjYXJkSWQpID0+IHtcbiAgICBwb3B1cERlbGV0ZUNhcmQub3BlblBvcHVwKCk7XG4gICAgcG9wdXBEZWxldGVDYXJkLnN1Ym1pdEJ1dHRvbigoKSA9PiB7XG4gICAgICBwb3B1cERlbGV0ZUNhcmQuYnV0dG9uU3RhdGVMb2FkaW5nRGVsZXRlKHRydWUpO1xuICAgICAgYXBpLmRlbGV0ZUNhcmQoY2FyZElkKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XG4gICAgICAgICAgcG9wdXBEZWxldGVDYXJkLmNsb3NlUG9wdXAoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg0J/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsDogJHtlcnJ9YCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICBwb3B1cERlbGV0ZUNhcmQuYnV0dG9uU3RhdGVMb2FkaW5nRGVsZXRlKGZhbHNlKTtcbiAgICAgICAgfSlcbiAgICB9KVxuICB9LFxuICBsaWtlQ2FyZENsaWNrOiAoY2FyZElkKSA9PiB7XG4gICAgYXBpLmFkZExpa2VDYXJkKGNhcmRJZClcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgY2FyZC5saWtlQ2FyZChyZXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgICAgIH0pO1xuICB9LFxuICBsaWtlQ2FyZFJlbW92ZTogKGNhcmRJZCkgPT4ge1xuICAgIGFwaS5kZWxldGVMaWtlQ2FyZChjYXJkSWQpXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICBjYXJkLmxpa2VDYXJkKGRhdGEpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgICAgIH0pO1xuICB9XG4gIH1cbik7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbi8qINCX0LDQs9GA0YPQt9C60LAg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1INC4INC60LDRgNGC0L7Rh9C10Log0YEg0YHQtdGA0LLQtdGA0LAgKi9cblxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0Q2FyZHMoKV0pXG4gIC50aGVuKChbdXNlckRhdGEsIGNhcmRzXSkgPT4ge1xuICAgIHVzZXIuc2V0VXNlckluZm8odXNlckRhdGEpO1xuICAgIHVzZXJJZCA9IHVzZXJEYXRhLl9pZDtcbiAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcyhjYXJkcyk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coYNCf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LA6ICR7ZXJyfWApO1xuICB9KVxuXG4vKiDQntGC0LrRgNGL0YLQuNC1INC40LfQvtCx0YDQsNC20LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuCAqL1xuXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3R5cGVfdmlldycsIHBvcHVwSW1hZ2UsIHBvcHVwTmFtZUltYWdlKTtcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhuYW1lLCBsaW5rKSB7XG4gIHBvcHVwV2l0aEltYWdlLm9wZW5Qb3B1cChuYW1lLCBsaW5rKTtcbn1cblxuLyog0JjQt9C80LXQvdC10L3QuNC1INC00LDQvdC90YvRhSDQv9GA0L7RhNC40LvRjyAqL1xuXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2VkaXQnLFxuKGRhdGEpID0+IHtcbiAgcG9wdXBFZGl0UHJvZmlsZS5idXR0b25TdGF0ZUxvYWRpbmcodHJ1ZSk7XG4gIGFwaS5lZGl0VXNlckluZm8oZGF0YS5pbnB1dE5hbWVQcm9maWxlLCBkYXRhLmlucHV0RGVzY3JpcHRpb25Qcm9maWxlKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICB1c2VyLnNldFVzZXJJbmZvKGRhdGEpO1xuICAgICAgcG9wdXBFZGl0UHJvZmlsZS5jbG9zZVBvcHVwKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coYNCf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LA6ICR7ZXJyfWApO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBFZGl0UHJvZmlsZS5idXR0b25TdGF0ZUxvYWRpbmcoZmFsc2UpO1xuICAgIH0pXG59KVxuXG5wb3B1cEVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmJ1dHRvbk9wZW5Qb3B1cEVkaXRQcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICB2YWxpZGF0aW9uZm9ybVBvcHVwRWRpdC5yZW1vdmVWYWxpZGF0aW9uKCk7XG4gIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IHVzZXIuZ2V0VXNlckluZm8oKTtcblxuICBpbnB1dE5hbWVQcm9maWxlLnZhbHVlID0gbmFtZTtcbiAgaW5wdXREZXNjcmlwdGlvblByb2ZpbGUudmFsdWUgPSBhYm91dDtcblxuICBwb3B1cEVkaXRQcm9maWxlLm9wZW5Qb3B1cCgpO1xuICB2YWxpZGF0aW9uZm9ybVBvcHVwRWRpdC5idXR0b25TdGF0ZU9mZigpO1xufSlcblxuLyog0JTQvtCx0LDQstC70LXQvdC40LUg0L3QvtCy0YvRhSDQutCw0YDRgtC+0YfQtdC6ICovXG5cbmNvbnN0IHBvcHVwQ3JlYXRlQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9jcmVhdGUnLFxuKGRhdGEpID0+IHtcbiAgcG9wdXBDcmVhdGVDYXJkLmJ1dHRvblN0YXRlTG9hZGluZyh0cnVlKTtcbiAgYXBpLmNyZWF0ZUNhcmQoZGF0YS5uYW1lLCBkYXRhLmxpbmspXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGNhcmRMaXN0LmFkZEl0ZW1TdGFydChjcmVhdGVDYXJkKGRhdGEpKTtcbiAgICAgIHBvcHVwQ3JlYXRlQ2FyZC5jbG9zZVBvcHVwKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coYNCf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LA6ICR7ZXJyfWApO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBDcmVhdGVDYXJkLmJ1dHRvblN0YXRlTG9hZGluZyhmYWxzZSk7XG4gICAgfSlcbn0pO1xuXG5wb3B1cENyZWF0ZUNhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuYnV0dG9uT3BlblBvcHVwQ3JlYXRlQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgdmFsaWRhdGlvbmZvcm1Qb3B1cEFkZC5yZW1vdmVWYWxpZGF0aW9uKCk7XG4gIHBvcHVwQ3JlYXRlQ2FyZC5vcGVuUG9wdXAoKTtcbiAgdmFsaWRhdGlvbmZvcm1Qb3B1cEFkZC5idXR0b25TdGF0ZU9mZigpO1xufSk7XG5cbi8qINCY0LfQvNC10L3QtdC90LjQtSDQsNCy0LDRgtCw0YDQsCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8gKi9cblxuY29uc3QgcG9wdXBBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfYXZhdGFyJyxcbihkYXRhKSA9PiB7XG4gIHBvcHVwQXZhdGFyLmJ1dHRvblN0YXRlTG9hZGluZyh0cnVlKTtcbiAgYXBpLmVkaXRVc2VyQXZhdGFyKGRhdGEuaW5wdXRBdmF0YXIpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHVzZXIuc2V0VXNlckluZm8oZGF0YSk7XG4gICAgICBwb3B1cEF2YXRhci5jbG9zZVBvcHVwKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coYNCf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LA6ICR7ZXJyfWApO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBBdmF0YXIuYnV0dG9uU3RhdGVMb2FkaW5nKGZhbHNlKTtcbiAgICB9KVxufSk7XG5wb3B1cEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xuXG5idXR0b25PcGVuUG9wdXBBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHZhbGlkYXRpb25mb3JtUG9wdXBBdmF0YXIucmVtb3ZlVmFsaWRhdGlvbigpO1xuICBjb25zdCB7IGF2YXRhciB9ID0gdXNlci5nZXRVc2VySW5mbygpO1xuXG4gIGlucHV0QXZhdGFyLnZhbHVlID0gYXZhdGFyO1xuXG4gIHBvcHVwQXZhdGFyLm9wZW5Qb3B1cCgpO1xuICB2YWxpZGF0aW9uZm9ybVBvcHVwQXZhdGFyLmJ1dHRvblN0YXRlT2ZmKCk7XG59KVxuXG4vKiDQn9C+0LTRgtCy0LXRgNC20LTQtdC90LjQtSDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LggKi9cblxuY29uc3QgcG9wdXBEZWxldGVDYXJkID0gbmV3IFBvcHVwV2l0aERlbGV0ZSgnLnBvcHVwX3R5cGVfZGVsZXRlJylcblxucG9wdXBEZWxldGVDYXJkLnNldEV2ZW50TGlzdGVuZXJzKClcblxuXG5cblxuXG4iXSwibmFtZXMiOlsiQ2FyZCIsImRhdGEiLCJ0ZW1wbGF0ZUlkIiwidXNlcklkIiwiaGFuZGxlQ2FyZENsaWNrIiwiX3JlZiIsImRlbGV0ZUNhcmRDbGljayIsImxpa2VDYXJkQ2xpY2siLCJsaWtlQ2FyZFJlbW92ZSIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZElkIiwiX2lkIiwiX2xpa2VzIiwibGlrZXMiLCJfb3duZXJJZCIsIm93bmVyIiwiX3RlbXBsYXRlSWQiLCJfdXNlcklkIiwiX2hhbmRsZUNhcmRDbGljayIsIl9kZWxldGVDYXJkQ2xpY2siLCJfbGlrZUNhcmRDbGljayIsIl9saWtlQ2FyZFJlbW92ZSIsImtleSIsInZhbHVlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9saWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwidG9nZ2xlIiwiX2xpa2VDb3VudGVyIiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJfdGhpcyIsInNvbWUiLCJ1c2VyIiwiYWRkTGlrZSIsIl9lbGVtZW50IiwiX2RlbGV0ZUJ1dHRvbiIsIl90aGlzMiIsIl9jYXJkSW1hZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwiY29udGFpbnMiLCJfZ2V0VGVtcGxhdGUiLCJfdGl0bGVDYXJkIiwiX2xpa2VzVXNlciIsImFsdCIsInNyYyIsIl9yZW1vdmVEZWxldGVCdXR0b24iLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJwYWdlIiwiYnV0dG9uT3BlblBvcHVwQ3JlYXRlQ2FyZCIsImJ1dHRvbk9wZW5Qb3B1cEVkaXRQcm9maWxlIiwiYnV0dG9uT3BlblBvcHVwQXZhdGFyIiwiZm9ybVBvcHVwRWRpdCIsImZvcm1zIiwicG9wdXBFZGl0IiwiZm9ybVBvcHVwQWRkIiwicG9wdXBBZGQiLCJmb3JtUG9wdXBBdmF0YXIiLCJwb3B1cEF2YXRhciIsInBvcHVwVmlldyIsInBvcHVwSW1hZ2UiLCJwb3B1cE5hbWVJbWFnZSIsImlucHV0TmFtZVByb2ZpbGUiLCJpbnB1dERlc2NyaXB0aW9uUHJvZmlsZSIsImlucHV0QXZhdGFyIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm0iLCJfZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2lucHV0cyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRWxlbWVudCIsImlucHV0IiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIlNlY3Rpb24iLCJjb250YWluZXJJZCIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJhcHBlbmQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImV2dCIsImNsb3NlUG9wdXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJjYWxsIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBOYW1lSW1hZ2UiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiUG9wdXBXaXRoRm9ybSIsImZvcm1TdWJtaXQiLCJfZm9ybVN1Ym1pdCIsIl9idXR0b25TdWJtaXQiLCJfYnV0dG9uU3VibWl0VGV4dCIsImlucHV0VmFsdWVzTGlzdCIsImluZm8iLCJpc0xvYWRpbmciLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiVXNlckluZm8iLCJzZWxlY3Rvck5hbWUiLCJzZWxlY3RvckRlc2NyaXB0aW9uIiwic2VsZWN0b3JBdmF0YXIiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZURlc2NyaXB0aW9uIiwiX3Byb2ZpbGVBdmF0YXIiLCJhYm91dCIsImF2YXRhciIsIkFwaSIsIl91cmwiLCJ1cmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJ0aGVuIiwiX2hhbmRsZVJlc3BvbnNlIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJwaG90byIsIlBvcHVwV2l0aERlbGV0ZSIsIl9idXR0b24iLCJkZWxldGVDYXJkIiwidmFsaWRhdGlvbmZvcm1Qb3B1cEVkaXQiLCJlbmFibGVWYWxpZGF0aW9uIiwidmFsaWRhdGlvbmZvcm1Qb3B1cEFkZCIsInZhbGlkYXRpb25mb3JtUG9wdXBBdmF0YXIiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiY2FyZExpc3QiLCJpdGVtcyIsImNyZWF0ZUNhcmQiLCJhZGRJdGVtIiwiY2FyZCIsInBvcHVwRGVsZXRlQ2FyZCIsIm9wZW5Qb3B1cCIsInN1Ym1pdEJ1dHRvbiIsImJ1dHRvblN0YXRlTG9hZGluZ0RlbGV0ZSIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImZpbmFsbHkiLCJhZGRMaWtlQ2FyZCIsImxpa2VDYXJkIiwiZGVsZXRlTGlrZUNhcmQiLCJnZW5lcmF0ZUNhcmQiLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldENhcmRzIiwiX3JlZjIiLCJ1c2VyRGF0YSIsImNhcmRzIiwic2V0VXNlckluZm8iLCJyZW5kZXJJdGVtcyIsInBvcHVwV2l0aEltYWdlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cEVkaXRQcm9maWxlIiwiYnV0dG9uU3RhdGVMb2FkaW5nIiwiZWRpdFVzZXJJbmZvIiwicmVtb3ZlVmFsaWRhdGlvbiIsIl91c2VyJGdldFVzZXJJbmZvIiwiYnV0dG9uU3RhdGVPZmYiLCJwb3B1cENyZWF0ZUNhcmQiLCJhZGRJdGVtU3RhcnQiLCJlZGl0VXNlckF2YXRhciJdLCJzb3VyY2VSb290IjoiIn0=