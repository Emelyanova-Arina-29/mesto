(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e,n,r,o,i){var u=i.deleteCardClick,a=i.likeCardClick,c=i.likeCardRemove;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._cardId=e._id,this._likes=e.likes,this._ownerId=e.owner._id,this._templateId=n,this._userId=r,this._handleCardClick=o,this._deleteCardClick=u,this._likeCardClick=a,this._likeCardRemove=c}var n,r;return n=t,r=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateId).content.querySelector(".card").cloneNode(!0)}},{key:"addLike",value:function(){this._likeButton.classList.add("card__like_active")}},{key:"removeLike",value:function(){this._likeButton.classList.remove("card__like_active")}},{key:"likeCard",value:function(t){this._likeButton.classList.toggle("card__like_active"),this._likes=t.likes,this._likeCounter.textContent=this._likes.length}},{key:"_likesUser",value:function(){var t=this;this._likes.some((function(e){return t._userId===e._id}))&&this.addLike()}},{key:"deleteCard",value:function(){this._element.remove(),this._element=null}},{key:"_removeDeleteButton",value:function(){this._userId!==this._ownerId&&this._deleteButton.remove()}},{key:"_setEventListeners",value:function(){var t=this;this._cardImage.addEventListener("click",(function(){t._handleCardClick(t._name,t._link)})),this._likeButton.addEventListener("click",(function(){t._likeButton.classList.contains("card__like_active")?t._likeCardRemove(t._cardId):t._likeCardClick(t._cardId)})),this._deleteButton.addEventListener("click",(function(){t._deleteCardClick(t._cardId)}))}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".card__like"),this._titleCard=this._element.querySelector(".card__title"),this._cardImage=this._element.querySelector(".card__image"),this._deleteButton=this._element.querySelector(".card__delete"),this._likeCounter=this._element.querySelector(".card__number-like"),this._likesUser(),this._cardImage.alt=this._name,this._titleCard.textContent=this._name,this._cardImage.src=this._link,this._removeDeleteButton(),this._likeCounter.textContent=this._likes.length,this._setEventListeners(),this._element}},{key:"getNameImage",value:function(){return this._name}},{key:"getLinkImage",value:function(){return this._link}}],r&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(),r={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"},o=document.querySelector(".page"),i=o.querySelector(".profile__add"),u=o.querySelector(".profile__edit"),a=o.querySelector(".profile__edit-avatar"),c=document.forms.popupEdit,l=document.forms.popupAdd,s=document.forms.popupAvatar,f=o.querySelector(".popup_type_view"),p=f.querySelector(".popup__image"),y=f.querySelector(".popup__caption"),d=c.querySelector(".popup__input_type_name"),h=c.querySelector(".popup__input_type_description"),v=s.querySelector(".popup__input_type_avatar");function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===_(o)?o:String(o)),r)}var o}var b=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=n,this._inputs=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector)}var e,n;return e=t,(n=[{key:"_hideInputError",value:function(t){var e=this._form.querySelector(".".concat(t.id,"-error"));e.classList.remove(this._errorClass),e.textContent="",t.classList.remove(this._inputErrorClass)}},{key:"_showInputError",value:function(t){var e=this._form.querySelector(".".concat(t.id,"-error"));e.classList.add(this._errorClass),e.textContent=t.validationMessage,t.classList.add(this._inputErrorClass)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_hasInvalidInput",value:function(){return this._inputs.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"buttonStateOff",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"_setEventListeners",value:function(){var t=this;this._toggleButtonState(),this._inputs.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"removeValidation",value:function(){var t=this;this._toggleButtonState(),this._inputs.forEach((function(e){t._hideInputError(e)}))}}])&&m(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==S(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===S(o)?o:String(o)),r)}var o}var k=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"addItem",value:function(t){this._container.append(t)}},{key:"addItemStart",value:function(t){this._container.prepend(t)}},{key:"renderItems",value:function(t){var e=this;t.forEach((function(t){e._renderer(t)}))}}])&&g(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}var E=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.closePopup()}},{key:"openPopup",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"closePopup",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){e.target.classList.contains("popup_opened")&&t.closePopup(),e.target.classList.contains("popup__close")&&t.closePopup()}))}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==P(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===P(o)?o:String(o)),r)}var o}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=I(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},j.apply(this,arguments)}function L(t,e){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},L(t,e)}function I(t){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},I(t)}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=I(r);if(o){var n=I(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,t))._popupImage=e,r._popupNameImage=n,r}return e=u,(n=[{key:"openPopup",value:function(t,e){this._popupImage.alt=t,this._popupNameImage.textContent=t,this._popupImage.src=e,j(I(u.prototype),"openPopup",this).call(this)}}])&&O(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(E);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==T(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===T(o)?o:String(o)),r)}var o}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=A(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},q.apply(this,arguments)}function x(t,e){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x(t,e)}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}var D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=A(r);if(o){var n=A(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._formSubmit=e,n._form=n._popup.querySelector(".popup__form"),n._inputs=n._form.querySelectorAll(".popup__input"),n._buttonSubmit=n._form.querySelector(".popup__button"),n._buttonSubmitText=n._buttonSubmit.textContent,n}return e=u,(n=[{key:"_getInputValues",value:function(){var t={};return this._inputs.forEach((function(e){t[e.name]=e.value})),t}},{key:"setInputValues",value:function(t){this._inputs.forEach((function(e){e.value=t[e.name]}))}},{key:"buttonStateLoading",value:function(t){this._buttonSubmit.textContent=t?"Сохранение...":this._buttonSubmitText}},{key:"setEventListeners",value:function(){var t=this;q(A(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._formSubmit(t._getInputValues()),t._form.reset(),t.closePopup()}))}}])&&B(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(E);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==U(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===U(o)?o:String(o)),r)}var o}var V=function(){function t(e){var n=e.selectorName,r=e.selectorDescription,o=e.selectorAvatar;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._profileName=document.querySelector(n),this._profileDescription=document.querySelector(r),this._profileAvatar=document.querySelector(o)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,about:this._profileDescription.textContent,avatar:this._profileAvatar.src}}},{key:"setUserInfo",value:function(t){this._profileName.textContent=t.name,this._profileDescription.textContent=t.about,this._profileAvatar.src=t.avatar}},{key:"setUserAvatar",value:function(t){this._profileAvatar.src=t.avatar}}])&&N(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==J(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===J(o)?o:String(o)),r)}var o}var M=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e.url,this._headers=e.headers}var e,n;return e=t,(n=[{key:"_handleResponse",value:function(t){return t.ok?t.json():Promise.reject("Произошла ошибка: ".concat(t.status))}},{key:"getCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then(this._handleResponse)}},{key:"createCard",value:function(t,e){return fetch("".concat(this._url,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({name:t,link:e})}).then(this._handleResponse)}},{key:"deleteCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t),{headers:this._headers,method:"DELETE"}).then(this._handleResponse)}},{key:"addLikeCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{headers:this._headers,method:"PUT"}).then(this._handleResponse)}},{key:"deleteLikeCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{headers:this._headers,method:"DELETE"}).then(this._handleResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then(this._handleResponse)}},{key:"editUserInfo",value:function(t,e){return fetch("".concat(this._url,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:t,about:e})}).then(this._handleResponse)}},{key:"editUserAvatar",value:function(t){return fetch("".concat(this._url,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:t})}).then(this._handleResponse)}}])&&H(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function $(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==z(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===z(o)?o:String(o)),r)}var o}function F(){return F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=K(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},F.apply(this,arguments)}function G(t,e){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},G(t,e)}function K(t){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},K(t)}var Q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=K(r);if(o){var n=K(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._form=e._popup.querySelector(".popup__form"),e._button=e._form.querySelectorAll(".popup__button"),e._buttonSubmit=e._form.querySelector(".popup__button"),e._buttonSubmitText=e._buttonSubmit.textContent,e}return e=u,(n=[{key:"buttonStateLoadingDelete",value:function(t){this._buttonSubmit.textContent=t?"Удаление...":this._buttonSubmitText}},{key:"submitButton",value:function(t){this._deleteCardClick=t}},{key:"setEventListeners",value:function(){var t=this;F(K(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._deleteCardClick(),t.closePopup()}))}}])&&$(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(E);function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var X=new b(r,c);X.enableValidation();var Y=new b(r,l);Y.enableValidation();var Z=new b(r,s);Z.enableValidation();var tt,et=new M({url:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{authorization:"f1580dcf-100f-4c1e-a333-5ef7b032595f","Content-Type":"application/json"}}),nt=new V({selectorName:".profile__name",selectorDescription:".profile__description",selectorAvatar:".profile__avatar"}),rt=new k({renderer:function(t){var e=ot(t);rt.addItem(e)}},".cards");function ot(t){var e=new n(t,"#cards",tt,ut,{deleteCardClick:function(t){st.openPopup(),st.submitButton((function(){st.buttonStateLoadingDelete(!0),et.deleteCard(t).then((function(){e.deleteCard(),st.closePopup()})).catch((function(t){console.log("Произошла ошибка: ".concat(t))})).finally((function(){st.buttonStateLoadingDelete(!1)}))}))},likeCardClick:function(t){et.addLikeCard(t).then((function(t){e.likeCard(t)})).catch((function(t){console.log("Произошла ошибка: ".concat(t))}))},likeCardRemove:function(t){et.deleteLikeCard(t).then((function(t){e.likeCard(t)})).catch((function(t){console.log("Произошла ошибка: ".concat(t))}))}});return e.generateCard()}Promise.all([et.getUserInfo(),et.getCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];nt.setUserInfo(o),tt=o._id,rt.renderItems(i)})).catch((function(t){console.log("Произошла ошибка: ".concat(t))}));var it=new R(".popup_type_view",p,y);function ut(t,e){it.openPopup(t,e)}it.setEventListeners();var at=new D(".popup_type_edit",(function(t){at.buttonStateLoading(!0),et.editUserInfo(t.inputNameProfile,t.inputDescriptionProfile).then((function(t){nt.setUserInfo(t),at.closePopup()})).catch((function(t){console.log("Произошла ошибка: ".concat(t))})).finally((function(){at.buttonStateLoading(!1)}))}));at.setEventListeners(),u.addEventListener("click",(function(){X.removeValidation();var t=nt.getUserInfo(),e=t.name,n=t.about;d.value=e,h.value=n,at.openPopup(),X.buttonStateOff()}));var ct=new D(".popup_type_create",(function(t){ct.buttonStateLoading(!0),et.createCard(t.name,t.link).then((function(t){rt.addItemStart(ot(t)),ct.closePopup()})).catch((function(t){console.log("Произошла ошибка: ".concat(t))})).finally((function(){ct.buttonStateLoading(!1)}))}));ct.setEventListeners(),i.addEventListener("click",(function(){Y.removeValidation(),ct.openPopup(),Y.buttonStateOff()}));var lt=new D(".popup_type_avatar",(function(t){lt.buttonStateLoading(!0),et.editUserAvatar(t.inputAvatar).then((function(t){nt.setUserInfo(t),lt.closePopup()})).catch((function(t){console.log("Произошла ошибка: ".concat(t))})).finally((function(){lt.buttonStateLoading(!1)}))}));lt.setEventListeners(),a.addEventListener("click",(function(){Z.removeValidation();var t=nt.getUserInfo().avatar;v.value=t,lt.openPopup(),Z.buttonStateOff()}));var st=new Q(".popup_type_delete");st.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFDbEIsSUFDQ3VFLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSSxxQkFBRHBHLE9BQXNCa0csR0FDbkMsSUFDQ0csU0FBUSxXQUNQcUIsR0FBZ0JMLG9CQUFtQixFQUNyQyxHQUNKLElBRUFLLEdBQWdCUCxvQkFFaEJwSixFQUEwQmpCLGlCQUFpQixTQUFTLFdBQ2xEc0ksRUFBdUJtQyxtQkFDdkJHLEdBQWdCNUIsWUFDaEJWLEVBQXVCcUMsZ0JBQ3pCLElBSUEsSUFBTWpKLEdBQWMsSUFBSStELEVBQWMsc0JBQ3RDLFNBQUN6SSxHQUNDMEUsR0FBWTZJLG9CQUFtQixHQUMvQi9CLEdBQUlzQyxlQUFlOU4sRUFBS2dGLGFBQ3JCeUYsTUFBSyxTQUFDekssR0FDTDBDLEdBQUt3SyxZQUFZbE4sR0FDakIwRSxHQUFZa0QsWUFDZCxJQUNDdUUsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJLHFCQUFEcEcsT0FBc0JrRyxHQUNuQyxJQUNDRyxTQUFRLFdBQ1A3SCxHQUFZNkksb0JBQW1CLEVBQ2pDLEdBQ0osSUFDQTdJLEdBQVkySSxvQkFFWmxKLEVBQXNCbkIsaUJBQWlCLFNBQVMsV0FDOUN1SSxFQUEwQmtDLG1CQUMxQixJQUFRN0QsRUFBV2xILEdBQUttSyxjQUFoQmpELE9BRVI1RSxFQUFZckQsTUFBUWlJLEVBRXBCbEYsR0FBWXNILFlBQ1pULEVBQTBCb0MsZ0JBQzVCLElBSUEsSUFBTTVCLEdBQWtCLElBQUlkLEVBQXNCLHNCQUVsRGMsR0FBZ0JzQixtQiIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMvZWxlbWVudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgdGVtcGxhdGVJZCwgdXNlcklkLCBoYW5kbGVDYXJkQ2xpY2ssIHsgZGVsZXRlQ2FyZENsaWNrLCBsaWtlQ2FyZENsaWNrLCBsaWtlQ2FyZFJlbW92ZSB9KSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XG4gICAgdGhpcy5fdGVtcGxhdGVJZCA9IHRlbXBsYXRlSWQ7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9kZWxldGVDYXJkQ2xpY2sgPSBkZWxldGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5fbGlrZUNhcmRDbGljayA9IGxpa2VDYXJkQ2xpY2s7XG4gICAgdGhpcy5fbGlrZUNhcmRSZW1vdmUgPSBsaWtlQ2FyZFJlbW92ZTtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZUlkKS5cbiAgICBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkJykuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgcmV0dXJuIGNhcmQ7XG4gIH1cblxuICAvKiDQn9C+0YHRgtCw0LLQuNGC0Ywg0LvQsNC50LogKi9cblxuICBhZGRMaWtlKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2FyZF9fbGlrZV9hY3RpdmUnKTtcbiAgfTtcblxuICAvKiDQo9Cx0YDQsNGC0Ywg0LvQsNC50LogKi9cblxuICByZW1vdmVMaWtlKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnY2FyZF9fbGlrZV9hY3RpdmUnKTtcbiAgfTtcblxuICAvKiDQm9Cw0LnQutC90YPRgtGMINC60LDRgNGC0L7Rh9C60YMgKi9cblxuICBsaWtlQ2FyZChkYXRhKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19saWtlX2FjdGl2ZScpO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgfTtcblxuICAvKiDQm9Cw0LnQutC90YPQuyDQu9C4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDQutCw0YDRgtC+0YfQutGDPyAqL1xuXG4gIF9saWtlc1VzZXIoKSB7XG4gICAgaWYgKHRoaXMuX2xpa2VzLnNvbWUoKHVzZXIpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl91c2VySWQgPT09IHVzZXIuX2lkO1xuICAgIH0pKSB7XG4gICAgICB0aGlzLmFkZExpa2UoKTtcbiAgICB9XG4gIH1cblxuICAvKiDQo9C00LDQu9C40YLRjCDQutCw0YDRgtC+0YfQutGDICovXG5cbiAgZGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgLyog0KPQsdC40YDQsNC10Lwg0LrQvdC+0L/QutGDINGD0LTQsNC70LXQvdC40Y8g0YMg0YfRg9C20LjRhSDQutCw0YDRgtC+0YfQtdC6ICovXG5cbiAgX3JlbW92ZURlbGV0ZUJ1dHRvbigpIHtcbiAgICBpZiAodGhpcy5fdXNlcklkICE9PSB0aGlzLl9vd25lcklkKSB7XG4gICAgICB0aGlzLl9kZWxldGVCdXR0b24ucmVtb3ZlKCk7XG4gICAgfVxuICB9XG5cbiAgLyog0J3QsNCy0LXRiNC40LLQsNC10Lwg0L7QsdGA0LDQsdC+0YLRh9C40LrQuCAqL1xuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XG4gICAgfSk7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnY2FyZF9fbGlrZV9hY3RpdmUnKSkge1xuICAgICAgICB0aGlzLl9saWtlQ2FyZFJlbW92ZSh0aGlzLl9jYXJkSWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fbGlrZUNhcmRDbGljayh0aGlzLl9jYXJkSWQpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2RlbGV0ZUNhcmRDbGljayh0aGlzLl9jYXJkSWQpO1xuICAgIH0pO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlJyk7XG4gICAgdGhpcy5fdGl0bGVDYXJkID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2RlbGV0ZScpO1xuICAgIHRoaXMuX2xpa2VDb3VudGVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbnVtYmVyLWxpa2UnKTtcblxuXG4gICAgdGhpcy5fbGlrZXNVc2VyKCk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl90aXRsZUNhcmQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX3JlbW92ZURlbGV0ZUJ1dHRvbigpO1xuICAgIHRoaXMuX2xpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIGdldE5hbWVJbWFnZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fbmFtZTtcbiAgfVxuXG4gIGdldExpbmtJbWFnZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fbGluaztcbiAgfVxufVxuIiwiLyog0JzQsNGB0YHQuNCyINC60LDRgNGC0L7Rh9C10LogKi9cblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6ICfQkNGA0YXRi9C3JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2Fya2h5ei5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0KfQtdC70Y/QsdC40L3RgdC60LDRjyDQvtCx0LvQsNGB0YLRjCcsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9jaGVseWFiaW5zay1vYmxhc3QuanBnJ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9CY0LLQsNC90L7QstC+JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnJ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2FtY2hhdGthLmpwZydcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQpdC+0LvQvNC+0LPQvtGA0YHQutC40Lkg0YDQsNC50L7QvScsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9raG9sbW9nb3Jza3ktcmF5b24uanBnJ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9CR0LDQudC60LDQuycsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnJ1xuICB9XG5dO1xuXG4vKiDQntCx0YrQtdC60YIsINGB0L7RgdGC0L7Rj9GJ0LjQuSDQuNC3INGB0LLQvtC50YHRgtCyLCDQt9C90LDRh9C10L3QuNGP0LzQuCDQutC+0YLQvtGA0YvRhSDRj9Cy0LvRj9GO0YLRgdGPINC60LvQsNGB0YHRiywg0L3QtdC+0LHRhdC+0LTQuNC80YvQtSDQtNC70Y8g0YPQvdC40LLQtdGA0YHQsNC70YzQvdC+0LPQviDQvdCw0L/QuNGB0LDQvdC40Y8g0LrQvtC00LAg0LLQsNC70LjQtNCw0YbQuNC4ICovXG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbl9kaXNhYmxlZCcsXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl92aXNpYmxlJ1xufTtcblxuZXhwb3J0IGNvbnN0IHBlcnNvbmFsRGF0YSA9IHtcbiAgdXJsOidodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTYwJyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICdmMTU4MGRjZi0xMDBmLTRjMWUtYTMzMy01ZWY3YjAzMjU5NWYnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfVxufVxuIiwiY29uc3QgcGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYWdlJyk7XG5cbmNvbnN0IGJ1dHRvbk9wZW5Qb3B1cENyZWF0ZUNhcmQgPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQnKTtcbmNvbnN0IGJ1dHRvbk9wZW5Qb3B1cEVkaXRQcm9maWxlID0gcGFnZS5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdCcpO1xuY29uc3QgYnV0dG9uT3BlblBvcHVwQXZhdGFyID0gcGFnZS5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1hdmF0YXInKTtcblxuY29uc3QgZm9ybVBvcHVwRWRpdCA9IGRvY3VtZW50LmZvcm1zLnBvcHVwRWRpdDtcbmNvbnN0IGZvcm1Qb3B1cEFkZCA9IGRvY3VtZW50LmZvcm1zLnBvcHVwQWRkO1xuY29uc3QgZm9ybVBvcHVwQXZhdGFyID0gZG9jdW1lbnQuZm9ybXMucG9wdXBBdmF0YXI7XG5cbmNvbnN0IHBvcHVwVmlldyA9IHBhZ2UucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfdmlldycpO1xuY29uc3QgcG9wdXBJbWFnZSA9IHBvcHVwVmlldy5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XG5jb25zdCBwb3B1cE5hbWVJbWFnZSA9IHBvcHVwVmlldy5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcHRpb24nKTtcbmNvbnN0IGlucHV0TmFtZVByb2ZpbGUgPSBmb3JtUG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9uYW1lJyk7XG5jb25zdCBpbnB1dERlc2NyaXB0aW9uUHJvZmlsZSA9IGZvcm1Qb3B1cEVkaXQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX2Rlc2NyaXB0aW9uJyk7XG5jb25zdCBpbnB1dEF2YXRhciA9IGZvcm1Qb3B1cEF2YXRhci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfYXZhdGFyJyk7XG5cblxuZXhwb3J0IHsgYnV0dG9uT3BlblBvcHVwQ3JlYXRlQ2FyZCxcbiAgYnV0dG9uT3BlblBvcHVwRWRpdFByb2ZpbGUsXG4gIGZvcm1Qb3B1cEVkaXQsIGZvcm1Qb3B1cEFkZCxcbiAgcG9wdXBJbWFnZSwgcG9wdXBOYW1lSW1hZ2UsXG4gIGlucHV0TmFtZVByb2ZpbGUsIGlucHV0RGVzY3JpcHRpb25Qcm9maWxlLFxuICBmb3JtUG9wdXBBdmF0YXIsIGJ1dHRvbk9wZW5Qb3B1cEF2YXRhcixcbiAgaW5wdXRBdmF0YXIgfVxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybSkge1xuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcbiAgICB0aGlzLl9pbnB1dHMgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gIH1cblxuICAvKiDQodC60YDRi9GC0LjQtSDQvtGI0LjQsdC60LggKi9cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8qINCf0L7QutCw0Lcg0L7RiNC40LHQutC4ICovXG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gIH1cblxuICAvKiDQn9GA0L7QstC10YDQutCwINCy0LDQu9C40LTQvdC+0YHRgtC4INC/0L7Qu9C10Lkg0LLQstC+0LTQsCAqL1xuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcbiAgICBpZiAoIWlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcbiAgICB9XG4gIH1cblxuICAvKiDQo9C30L3QsNC10LwsINC10YHRgtGMINC70Lgg0L3QtdCy0LDQu9C40LTQvdGL0Lkg0LjQvdC/0YPRgiAqL1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0cy5zb21lKChpbnB1dCkgPT5cbiAgICAgICFpbnB1dC52YWxpZGl0eS52YWxpZClcbiAgfVxuXG4gIC8qINCf0LXRgNC10LrQu9GO0YfQtdC90LjQtSDRgdC+0YHRgtC+0Y/QvdC40Y8g0LrQvdC+0L/QutC4ICovXG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuIC8qINCR0LvQvtC60LjRgNC+0LLQutCwINC60L3QvtC/0LrQuCAqL1xuXG4gIGJ1dHRvblN0YXRlT2ZmKCkge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qINCj0YHRgtCw0L3QvtCy0LrQsCDRgdC70YPRiNCw0YLQtdC70LXQuSAqL1xuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICAvKiDQndC10L/QvtGB0YDQtdC00YHRgtCy0LXQvdC90L7QtSDQv9C+0LTQutC70Y7Rh9C10L3QuNC1INC/0YDQvtCy0LXRgNC60Lgg0L/QvtC70LXQuSAqL1xuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIC8qINCj0LTQsNC70LXQvdC40LUg0YHQvtC+0LHRidC10L3QuNGPINCy0LDQu9C40LTQsNGG0LjQuCAqL1xuXG4gIHJlbW92ZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcbiAgICB9KVxuICB9XG59XG5cbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJJZCkge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJJZCk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICB9XG5cbiAgYWRkSXRlbVN0YXJ0KGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKGRhdGEpIHtcbiAgICBkYXRhLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpXG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcbiAgICB9XG4gIH1cblxuICBvcGVuUG9wdXAoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcblxuICB9XG5cbiAgY2xvc2VQb3B1cCgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuXG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpKSB7XG4gICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xuICAgICAgfVxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UnKSkge1xuICAgICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBwb3B1cEltYWdlLCBwb3B1cE5hbWVJbWFnZSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSBwb3B1cEltYWdlO1xuICAgIHRoaXMuX3BvcHVwTmFtZUltYWdlID0gcG9wdXBOYW1lSW1hZ2U7XG4gIH1cblxuICBvcGVuUG9wdXAobmFtZSwgbGluaykge1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl9wb3B1cE5hbWVJbWFnZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xuXG4gICAgc3VwZXIub3BlblBvcHVwKCk7XG4gIH1cblxuXG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtU3VibWl0ID0gZm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG4gICAgdGhpcy5faW5wdXRzID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0Jyk7XG4gICAgdGhpcy5fYnV0dG9uU3VibWl0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpO1xuICAgIHRoaXMuX2J1dHRvblN1Ym1pdFRleHQgPSB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXNMaXN0ID0ge307XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goIChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXRWYWx1ZXNMaXN0W2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gaW5wdXRWYWx1ZXNMaXN0O1xuICB9XG5cbiAgc2V0SW5wdXRWYWx1ZXMoaW5mbykge1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQudmFsdWUgPSBpbmZvW2lucHV0Lm5hbWVdXG4gICAgfSlcbiAgfVxuXG4gIC8qINCa0L3QvtC/0LrQsCDQstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCAqL1xuXG4gIGJ1dHRvblN0YXRlTG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSB0aGlzLl9idXR0b25TdWJtaXRUZXh0O1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2Zvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7c2VsZWN0b3JOYW1lLCBzZWxlY3RvckRlc2NyaXB0aW9uLCBzZWxlY3RvckF2YXRhcn0pIHtcbiAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JOYW1lKTtcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yRGVzY3JpcHRpb24pO1xuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yQXZhdGFyKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50LFxuICAgICAgYXZhdGFyOiB0aGlzLl9wcm9maWxlQXZhdGFyLnNyY1xuICAgIH1cblxuICAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKGRhdGEpIHtcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjID0gZGF0YS5hdmF0YXJcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXIoZGF0YSkge1xuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjID0gZGF0YS5hdmF0YXJcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHRoaXMuX3VybCA9IGRhdGEudXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBkYXRhLmhlYWRlcnM7XG4gIH1cblxuICAvKiDQntCx0YDQsNCx0L7RgtC60LAg0L7RgtCy0LXRgtCwINGB0LXRgNCy0LXRgNCwICovXG5cbiAgX2hhbmRsZVJlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9XG4gIH1cblxuICAvKiDQl9Cw0LPRgNGD0LfQutCwINC60LDRgNGC0L7Rh9C10Log0YEg0YHQtdGA0LLQtdGA0LAgKi9cblxuICBnZXRDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gIH1cblxuICAvKiDQlNC+0LHQsNCy0LvQtdC90LjQtSDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LggKi9cblxuICBjcmVhdGVDYXJkKG5hbWUsIGxpbmspIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZTogbmFtZSwgbGluazogbGluayB9KVxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSlcbiAgfVxuXG4gIC8qINCj0LTQsNC70LXQvdC40LUg0LrQsNGA0YLQvtGH0LrQuCAqL1xuXG4gIGRlbGV0ZUNhcmQoaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSlcbiAgfVxuXG4gIC8qINCU0L7QsdCw0LLQu9C10L3QuNC1INC70LDQudC60LAg0LrQsNGA0YLQvtGH0LrQtSAqL1xuXG4gIGFkZExpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSlcbiAgfVxuXG4gIC8qINCj0LHRgNCw0YLRjCDQu9Cw0LnQuiDRgSDQutCw0YDRgtC+0YfQutC4ICovXG5cbiAgZGVsZXRlTGlrZUNhcmQoaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSlcbiAgfVxuXG4gIC8qINCX0LDQs9GA0YPQt9C60LAg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1ICovXG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICB9XG5cbiAgLyog0KDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtSDQv9GA0L7RhNC40LvRjyAqL1xuXG4gIGVkaXRVc2VySW5mbyhuYW1lLCBhYm91dCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZTogbmFtZSwgYWJvdXQ6IGFib3V0IH0pXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICB9XG5cbiAgLyog0JjQt9C80LXQvdC10L3QuNC1INCw0LLQsNGC0LDRgNCwINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyAqL1xuXG4gIGVkaXRVc2VyQXZhdGFyKHBob3RvKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyOiBwaG90byB9KVxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSlcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2J1dHRvbicpO1xuICAgIHRoaXMuX2J1dHRvblN1Ym1pdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24nKTtcbiAgICB0aGlzLl9idXR0b25TdWJtaXRUZXh0ID0gdGhpcy5fYnV0dG9uU3VibWl0LnRleHRDb250ZW50O1xuICB9XG5cbiAgLyog0JrQvdC+0L/QutCwINC/0YDQuCDQt9Cw0LPRgNGD0LfQutC1ICovXG5cbiAgYnV0dG9uU3RhdGVMb2FkaW5nRGVsZXRlKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9ICfQo9C00LDQu9C10L3QuNC1Li4uJztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uU3VibWl0LnRleHRDb250ZW50ID0gdGhpcy5fYnV0dG9uU3VibWl0VGV4dDtcbiAgICB9XG4gIH1cblxuICAvKiDQktGL0LfQvtCyINGE0YPQvdC60YbQuNC4INGD0LTQsNC70LXQvdC40Y8gKi9cblxuICBzdWJtaXRCdXR0b24oZGVsZXRlQ2FyZCkge1xuICAgIHRoaXMuX2RlbGV0ZUNhcmRDbGljayA9IGRlbGV0ZUNhcmRcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2RlbGV0ZUNhcmRDbGljaygpO1xuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IENhcmQgfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIHZhbGlkYXRpb25Db25maWcsIHBlcnNvbmFsRGF0YSB9IGZyb20gJy4uL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IGJ1dHRvbk9wZW5Qb3B1cENyZWF0ZUNhcmQsXG4gIGJ1dHRvbk9wZW5Qb3B1cEVkaXRQcm9maWxlLFxuICBmb3JtUG9wdXBFZGl0LCBmb3JtUG9wdXBBZGQsXG4gIHBvcHVwSW1hZ2UsIHBvcHVwTmFtZUltYWdlLFxuICBpbnB1dE5hbWVQcm9maWxlLCBpbnB1dERlc2NyaXB0aW9uUHJvZmlsZSxcbiAgZm9ybVBvcHVwQXZhdGFyLCBidXR0b25PcGVuUG9wdXBBdmF0YXIsXG4gIGlucHV0QXZhdGFyIH0gZnJvbSAnLi4vc2NyaXB0cy91dGlscy9lbGVtZW50cy5qcyc7XG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgJy4vaW5kZXguY3NzJztcbmltcG9ydCBBcGkgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24nO1xuXG4vKiDQn9C+0LTQutC70Y7Rh9C10L3QuNC1INCy0LDQu9C40LTQsNGG0LjQuCAqL1xuXG5jb25zdCB2YWxpZGF0aW9uZm9ybVBvcHVwRWRpdCA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm1Qb3B1cEVkaXQpO1xudmFsaWRhdGlvbmZvcm1Qb3B1cEVkaXQuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCB2YWxpZGF0aW9uZm9ybVBvcHVwQWRkID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybVBvcHVwQWRkKTtcbnZhbGlkYXRpb25mb3JtUG9wdXBBZGQuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCB2YWxpZGF0aW9uZm9ybVBvcHVwQXZhdGFyID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybVBvcHVwQXZhdGFyKTtcbnZhbGlkYXRpb25mb3JtUG9wdXBBdmF0YXIuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vKiDQn9C+0LTQutC70Y7Rh9C10L3QuNC1IEFwaSAqL1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHBlcnNvbmFsRGF0YSk7XG5cbmxldCB1c2VySWQ7XG5cbi8qINCU0LDQvdC90YvQtSDQv9GA0L7RhNC40LvRjyAqL1xuXG5jb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKHtcbiAgc2VsZWN0b3JOYW1lOiAnLnByb2ZpbGVfX25hbWUnLFxuICBzZWxlY3RvckRlc2NyaXB0aW9uOiAnLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJyxcbiAgc2VsZWN0b3JBdmF0YXI6ICcucHJvZmlsZV9fYXZhdGFyJ1xufSk7XG5cbi8qINCU0L7QsdCw0LLQu9C10L3QuNC1INC80LDRgdGB0LjQstCwINC60LDRgNGC0L7Rh9C10LogKi9cblxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XG4gIHJlbmRlcmVyOiAoaXRlbXMpID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtcyk7XG5cbiAgICBjYXJkTGlzdC5hZGRJdGVtKGVsZW1lbnQpO1xuICB9XG4gIH0sICcuY2FyZHMnXG4pO1xuXG4vKiDQodC+0LfQtNCw0L3QuNC1INC60LDRgNGC0L7Rh9C10LogKi9cblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCAnI2NhcmRzJywgdXNlcklkLCBoYW5kbGVDYXJkQ2xpY2ssXG4gIHsgZGVsZXRlQ2FyZENsaWNrOiAoY2FyZElkKSA9PiB7XG4gICAgcG9wdXBEZWxldGVDYXJkLm9wZW5Qb3B1cCgpO1xuICAgIHBvcHVwRGVsZXRlQ2FyZC5zdWJtaXRCdXR0b24oKCkgPT4ge1xuICAgICAgcG9wdXBEZWxldGVDYXJkLmJ1dHRvblN0YXRlTG9hZGluZ0RlbGV0ZSh0cnVlKTtcbiAgICAgIGFwaS5kZWxldGVDYXJkKGNhcmRJZClcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGNhcmQuZGVsZXRlQ2FyZCgpO1xuICAgICAgICAgIHBvcHVwRGVsZXRlQ2FyZC5jbG9zZVBvcHVwKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coYNCf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LA6ICR7ZXJyfWApO1xuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgcG9wdXBEZWxldGVDYXJkLmJ1dHRvblN0YXRlTG9hZGluZ0RlbGV0ZShmYWxzZSk7XG4gICAgICAgIH0pXG4gICAgfSlcbiAgfSxcbiAgbGlrZUNhcmRDbGljazogKGNhcmRJZCkgPT4ge1xuICAgIGFwaS5hZGRMaWtlQ2FyZChjYXJkSWQpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGNhcmQubGlrZUNhcmQocmVzKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhg0J/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsDogJHtlcnJ9YCk7XG4gICAgICB9KTtcbiAgfSxcbiAgbGlrZUNhcmRSZW1vdmU6IChjYXJkSWQpID0+IHtcbiAgICBhcGkuZGVsZXRlTGlrZUNhcmQoY2FyZElkKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgY2FyZC5saWtlQ2FyZChkYXRhKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhg0J/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsDogJHtlcnJ9YCk7XG4gICAgICB9KTtcbiAgfVxuICB9XG4pO1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG5cbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG4vKiDQl9Cw0LPRgNGD0LfQutCwINC40L3RhNC+0YDQvNCw0YbQuNC4INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtSDQuCDQutCw0YDRgtC+0YfQtdC6INGBINGB0LXRgNCy0LXRgNCwICovXG5cblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldENhcmRzKCldKVxuICAudGhlbigoW3VzZXJEYXRhLCBjYXJkc10pID0+IHtcbiAgICB1c2VyLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcbiAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XG4gICAgY2FyZExpc3QucmVuZGVySXRlbXMoY2FyZHMpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgfSlcblxuLyog0J7RgtC60YDRi9GC0LjQtSDQuNC30L7QsdGA0LDQttC10L3QuNGPINC60LDRgNGC0L7Rh9C60LggKi9cblxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF90eXBlX3ZpZXcnLCBwb3B1cEltYWdlLCBwb3B1cE5hbWVJbWFnZSk7XG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2sobmFtZSwgbGluaykge1xuICBwb3B1cFdpdGhJbWFnZS5vcGVuUG9wdXAobmFtZSwgbGluayk7XG59XG5cbi8qINCY0LfQvNC10L3QtdC90LjQtSDQtNCw0L3QvdGL0YUg0L/RgNC+0YTQuNC70Y8gKi9cblxuY29uc3QgcG9wdXBFZGl0UHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9lZGl0JyxcbihkYXRhKSA9PiB7XG4gIHBvcHVwRWRpdFByb2ZpbGUuYnV0dG9uU3RhdGVMb2FkaW5nKHRydWUpO1xuICBhcGkuZWRpdFVzZXJJbmZvKGRhdGEuaW5wdXROYW1lUHJvZmlsZSwgZGF0YS5pbnB1dERlc2NyaXB0aW9uUHJvZmlsZSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgdXNlci5zZXRVc2VySW5mbyhkYXRhKTtcbiAgICAgIHBvcHVwRWRpdFByb2ZpbGUuY2xvc2VQb3B1cCgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHBvcHVwRWRpdFByb2ZpbGUuYnV0dG9uU3RhdGVMb2FkaW5nKGZhbHNlKTtcbiAgICB9KVxufSlcblxucG9wdXBFZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5idXR0b25PcGVuUG9wdXBFZGl0UHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgdmFsaWRhdGlvbmZvcm1Qb3B1cEVkaXQucmVtb3ZlVmFsaWRhdGlvbigpO1xuICBjb25zdCB7IG5hbWUsIGFib3V0IH0gPSB1c2VyLmdldFVzZXJJbmZvKCk7XG5cbiAgaW5wdXROYW1lUHJvZmlsZS52YWx1ZSA9IG5hbWU7XG4gIGlucHV0RGVzY3JpcHRpb25Qcm9maWxlLnZhbHVlID0gYWJvdXQ7XG5cbiAgcG9wdXBFZGl0UHJvZmlsZS5vcGVuUG9wdXAoKTtcbiAgdmFsaWRhdGlvbmZvcm1Qb3B1cEVkaXQuYnV0dG9uU3RhdGVPZmYoKTtcbn0pXG5cbi8qINCU0L7QsdCw0LLQu9C10L3QuNC1INC90L7QstGL0YUg0LrQsNGA0YLQvtGH0LXQuiAqL1xuXG5jb25zdCBwb3B1cENyZWF0ZUNhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfY3JlYXRlJyxcbihkYXRhKSA9PiB7XG4gIHBvcHVwQ3JlYXRlQ2FyZC5idXR0b25TdGF0ZUxvYWRpbmcodHJ1ZSk7XG4gIGFwaS5jcmVhdGVDYXJkKGRhdGEubmFtZSwgZGF0YS5saW5rKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBjYXJkTGlzdC5hZGRJdGVtU3RhcnQoY3JlYXRlQ2FyZChkYXRhKSk7XG4gICAgICBwb3B1cENyZWF0ZUNhcmQuY2xvc2VQb3B1cCgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHBvcHVwQ3JlYXRlQ2FyZC5idXR0b25TdGF0ZUxvYWRpbmcoZmFsc2UpO1xuICAgIH0pXG59KTtcblxucG9wdXBDcmVhdGVDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmJ1dHRvbk9wZW5Qb3B1cENyZWF0ZUNhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHZhbGlkYXRpb25mb3JtUG9wdXBBZGQucmVtb3ZlVmFsaWRhdGlvbigpO1xuICBwb3B1cENyZWF0ZUNhcmQub3BlblBvcHVwKCk7XG4gIHZhbGlkYXRpb25mb3JtUG9wdXBBZGQuYnV0dG9uU3RhdGVPZmYoKTtcbn0pO1xuXG4vKiDQmNC30LzQtdC90LXQvdC40LUg0LDQstCw0YLQsNGA0LAg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPICovXG5cbmNvbnN0IHBvcHVwQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2F2YXRhcicsXG4oZGF0YSkgPT4ge1xuICBwb3B1cEF2YXRhci5idXR0b25TdGF0ZUxvYWRpbmcodHJ1ZSk7XG4gIGFwaS5lZGl0VXNlckF2YXRhcihkYXRhLmlucHV0QXZhdGFyKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICB1c2VyLnNldFVzZXJJbmZvKGRhdGEpO1xuICAgICAgcG9wdXBBdmF0YXIuY2xvc2VQb3B1cCgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHBvcHVwQXZhdGFyLmJ1dHRvblN0YXRlTG9hZGluZyhmYWxzZSk7XG4gICAgfSlcbn0pO1xucG9wdXBBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuYnV0dG9uT3BlblBvcHVwQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICB2YWxpZGF0aW9uZm9ybVBvcHVwQXZhdGFyLnJlbW92ZVZhbGlkYXRpb24oKTtcbiAgY29uc3QgeyBhdmF0YXIgfSA9IHVzZXIuZ2V0VXNlckluZm8oKTtcblxuICBpbnB1dEF2YXRhci52YWx1ZSA9IGF2YXRhcjtcblxuICBwb3B1cEF2YXRhci5vcGVuUG9wdXAoKTtcbiAgdmFsaWRhdGlvbmZvcm1Qb3B1cEF2YXRhci5idXR0b25TdGF0ZU9mZigpO1xufSlcblxuLyog0J/QvtC00YLQstC10YDQttC00LXQvdC40LUg0YPQtNCw0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4ICovXG5cbmNvbnN0IHBvcHVwRGVsZXRlQ2FyZCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oJy5wb3B1cF90eXBlX2RlbGV0ZScpXG5cbnBvcHVwRGVsZXRlQ2FyZC5zZXRFdmVudExpc3RlbmVycygpXG5cblxuXG5cblxuIl0sIm5hbWVzIjpbIkNhcmQiLCJkYXRhIiwidGVtcGxhdGVJZCIsInVzZXJJZCIsImhhbmRsZUNhcmRDbGljayIsIl9yZWYiLCJkZWxldGVDYXJkQ2xpY2siLCJsaWtlQ2FyZENsaWNrIiwibGlrZUNhcmRSZW1vdmUiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRJZCIsIl9pZCIsIl9saWtlcyIsImxpa2VzIiwiX293bmVySWQiLCJvd25lciIsIl90ZW1wbGF0ZUlkIiwiX3VzZXJJZCIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfZGVsZXRlQ2FyZENsaWNrIiwiX2xpa2VDYXJkQ2xpY2siLCJfbGlrZUNhcmRSZW1vdmUiLCJrZXkiLCJ2YWx1ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfbGlrZUJ1dHRvbiIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInRvZ2dsZSIsIl9saWtlQ291bnRlciIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiX3RoaXMiLCJzb21lIiwidXNlciIsImFkZExpa2UiLCJfZWxlbWVudCIsIl9kZWxldGVCdXR0b24iLCJfdGhpczIiLCJfY2FyZEltYWdlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5zIiwiX2dldFRlbXBsYXRlIiwiX3RpdGxlQ2FyZCIsIl9saWtlc1VzZXIiLCJhbHQiLCJzcmMiLCJfcmVtb3ZlRGVsZXRlQnV0dG9uIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwicGFnZSIsImJ1dHRvbk9wZW5Qb3B1cENyZWF0ZUNhcmQiLCJidXR0b25PcGVuUG9wdXBFZGl0UHJvZmlsZSIsImJ1dHRvbk9wZW5Qb3B1cEF2YXRhciIsImZvcm1Qb3B1cEVkaXQiLCJmb3JtcyIsInBvcHVwRWRpdCIsImZvcm1Qb3B1cEFkZCIsInBvcHVwQWRkIiwiZm9ybVBvcHVwQXZhdGFyIiwicG9wdXBBdmF0YXIiLCJwb3B1cFZpZXciLCJwb3B1cEltYWdlIiwicG9wdXBOYW1lSW1hZ2UiLCJpbnB1dE5hbWVQcm9maWxlIiwiaW5wdXREZXNjcmlwdGlvblByb2ZpbGUiLCJpbnB1dEF2YXRhciIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtIiwiX2Zvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfZm9ybSIsIl9pbnB1dHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbkVsZW1lbnQiLCJpbnB1dCIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJTZWN0aW9uIiwiY29udGFpbmVySWQiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJldnQiLCJjbG9zZVBvcHVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsIlBvcHVwV2l0aEltYWdlIiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwiY2FsbCIsIl9wb3B1cEltYWdlIiwiX3BvcHVwTmFtZUltYWdlIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtU3VibWl0IiwiX2Zvcm1TdWJtaXQiLCJfYnV0dG9uU3VibWl0IiwiX2J1dHRvblN1Ym1pdFRleHQiLCJpbnB1dFZhbHVlc0xpc3QiLCJpbmZvIiwiaXNMb2FkaW5nIiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlVzZXJJbmZvIiwic2VsZWN0b3JOYW1lIiwic2VsZWN0b3JEZXNjcmlwdGlvbiIsInNlbGVjdG9yQXZhdGFyIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVEZXNjcmlwdGlvbiIsIl9wcm9maWxlQXZhdGFyIiwiYWJvdXQiLCJhdmF0YXIiLCJBcGkiLCJfdXJsIiwidXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsIl9oYW5kbGVSZXNwb25zZSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZElkIiwicGhvdG8iLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJfYnV0dG9uIiwiZGVsZXRlQ2FyZCIsInZhbGlkYXRpb25mb3JtUG9wdXBFZGl0IiwiZW5hYmxlVmFsaWRhdGlvbiIsInZhbGlkYXRpb25mb3JtUG9wdXBBZGQiLCJ2YWxpZGF0aW9uZm9ybVBvcHVwQXZhdGFyIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImNhcmRMaXN0IiwiaXRlbXMiLCJjcmVhdGVDYXJkIiwiYWRkSXRlbSIsImNhcmQiLCJwb3B1cERlbGV0ZUNhcmQiLCJvcGVuUG9wdXAiLCJzdWJtaXRCdXR0b24iLCJidXR0b25TdGF0ZUxvYWRpbmdEZWxldGUiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJmaW5hbGx5IiwiYWRkTGlrZUNhcmQiLCJsaWtlQ2FyZCIsImRlbGV0ZUxpa2VDYXJkIiwiZ2VuZXJhdGVDYXJkIiwiYWxsIiwiZ2V0VXNlckluZm8iLCJnZXRDYXJkcyIsIl9yZWYyIiwidXNlckRhdGEiLCJjYXJkcyIsInNldFVzZXJJbmZvIiwicmVuZGVySXRlbXMiLCJwb3B1cFdpdGhJbWFnZSIsInNldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBFZGl0UHJvZmlsZSIsImJ1dHRvblN0YXRlTG9hZGluZyIsImVkaXRVc2VySW5mbyIsInJlbW92ZVZhbGlkYXRpb24iLCJfdXNlciRnZXRVc2VySW5mbyIsImJ1dHRvblN0YXRlT2ZmIiwicG9wdXBDcmVhdGVDYXJkIiwiYWRkSXRlbVN0YXJ0IiwiZWRpdFVzZXJBdmF0YXIiXSwic291cmNlUm9vdCI6IiJ9